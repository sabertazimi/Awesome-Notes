
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Design Patterns Notes Â· Awesome Notes</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="sabertazimi">
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism-tomorrow.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-disqus/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-theme-comscore/test.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="codeReviewBasicNotes.html" />
    

    <style>
    @media only screen and (max-width: 640px) {
        .book-header .hidden-mobile {
            display: none;
        }
    }
    </style>
    <script>
        window["gitbook-plugin-github-buttons"] = {"buttons":[{"user":"sabertazimi","repo":"awesome-notes","type":"star","size":"small","count":true}]};
    </script>

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://github.com/sabertazimi/awesome-notes" target="_blank" class="custom-link">Awesome Notes</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Computer Science
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" >
            
                <span>
            
                    
                    Algorithms
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="../../computerScience/algorithms/algorithmsBasicNotes.html">
            
                <a href="../../computerScience/algorithms/algorithmsBasicNotes.html">
            
                    
                    Algorithms Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="../../computerScience/algorithms/ojBasicNotes.html">
            
                <a href="../../computerScience/algorithms/ojBasicNotes.html">
            
                    
                    Oj Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" >
            
                <span>
            
                    
                    Architecture
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="../../computerScience/architecture/archBasicNotes.html">
            
                <a href="../../computerScience/architecture/archBasicNotes.html">
            
                    
                    Arch Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2" data-path="../../computerScience/architecture/graphProcessingNotes.html">
            
                <a href="../../computerScience/architecture/graphProcessingNotes.html">
            
                    
                    Graph Processing Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" >
            
                <span>
            
                    
                    Compilers
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.3.1" data-path="../../computerScience/compilers/compilersBasicNotes.html">
            
                <a href="../../computerScience/compilers/compilersBasicNotes.html">
            
                    
                    Compilers Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.4" >
            
                <span>
            
                    
                    Data Base
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.4.1" data-path="../../computerScience/dataBase/databaseBasicNotes.html">
            
                <a href="../../computerScience/dataBase/databaseBasicNotes.html">
            
                    
                    Database Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.5" >
            
                <span>
            
                    
                    Network
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.5.1" data-path="../../computerScience/network/networkBasicNotes.html">
            
                <a href="../../computerScience/network/networkBasicNotes.html">
            
                    
                    Network Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.6" >
            
                <span>
            
                    
                    Operating Systems
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.6.1" data-path="../../computerScience/operatingSystems/CSAPP.html">
            
                <a href="../../computerScience/operatingSystems/CSAPP.html">
            
                    
                    CSAPP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.2" data-path="../../computerScience/operatingSystems/memoryManagementBasicNotes.html">
            
                <a href="../../computerScience/operatingSystems/memoryManagementBasicNotes.html">
            
                    
                    Memory Management Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.3" data-path="../../computerScience/operatingSystems/operatingSystemsBasicNotes.html">
            
                <a href="../../computerScience/operatingSystems/operatingSystemsBasicNotes.html">
            
                    
                    Operating Systems Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.7" >
            
                <span>
            
                    
                    Software Testing
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.7.1" data-path="../../computerScience/softwareTesting/softwareTestingBasicNotes.html">
            
                <a href="../../computerScience/softwareTesting/softwareTestingBasicNotes.html">
            
                    
                    Software Testing Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.8" >
            
                <span>
            
                    
                    Virtualization
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.8.1" data-path="../../computerScience/virtualization/virtBasicNotes.html">
            
                <a href="../../computerScience/virtualization/virtBasicNotes.html">
            
                    
                    Virt Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.9" data-path="../../computerScience/latexBasicNotes.html">
            
                <a href="../../computerScience/latexBasicNotes.html">
            
                    
                    Latex Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    Language
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" >
            
                <span>
            
                    
                    Assembly
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../../language/assembly/AssemblyBasic.html">
            
                <a href="../../language/assembly/AssemblyBasic.html">
            
                    
                    Assembly Basic
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" >
            
                <span>
            
                    
                    C
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" >
            
                <span>
            
                    
                    Tools
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1.1" data-path="../../language/c/tools/awesomeTools.html">
            
                <a href="../../language/c/tools/awesomeTools.html">
            
                    
                    Awesome Tools
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.1.2" data-path="../../language/c/tools/gdbTutorial.html">
            
                <a href="../../language/c/tools/gdbTutorial.html">
            
                    
                    Gdb Tutorial
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2.2" data-path="../../language/c/cBasicNotes.html">
            
                <a href="../../language/c/cBasicNotes.html">
            
                    
                    C Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.3" data-path="../../language/c/namingConventions.html">
            
                <a href="../../language/c/namingConventions.html">
            
                    
                    Naming Conventions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.4" data-path="../../language/c/standardLibrary.html">
            
                <a href="../../language/c/standardLibrary.html">
            
                    
                    Standard Library
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3" >
            
                <span>
            
                    
                    Cpp
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.1" data-path="../../language/cpp/cppBasicNotes.html">
            
                <a href="../../language/cpp/cppBasicNotes.html">
            
                    
                    Cpp Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.4" >
            
                <span>
            
                    
                    Go
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.4.1" data-path="../../language/go/goBasicNotes.html">
            
                <a href="../../language/go/goBasicNotes.html">
            
                    
                    Go Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.5" >
            
                <span>
            
                    
                    Haskell
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.5.1" data-path="../../language/haskell/haskellBasicNotes.html">
            
                <a href="../../language/haskell/haskellBasicNotes.html">
            
                    
                    Haskell Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.6" >
            
                <span>
            
                    
                    Java
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.6.1" data-path="../../language/java/javaBasicNotes.html">
            
                <a href="../../language/java/javaBasicNotes.html">
            
                    
                    Java Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6.2" data-path="../../language/java/javaNamingConventions.html">
            
                <a href="../../language/java/javaNamingConventions.html">
            
                    
                    Java Naming Conventions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.7" >
            
                <span>
            
                    
                    Python
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.7.1" data-path="../../language/python/pythonBasicNotes.html">
            
                <a href="../../language/python/pythonBasicNotes.html">
            
                    
                    Python Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.8" >
            
                <span>
            
                    
                    Verilog
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.8.1" data-path="../../language/verilog/verilogBasicNotes.html">
            
                <a href="../../language/verilog/verilogBasicNotes.html">
            
                    
                    Verilog Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    Programming
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" >
            
                <span>
            
                    
                    Android
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="../android/androidBasicNotes.html">
            
                <a href="../android/androidBasicNotes.html">
            
                    
                    Android Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.2" >
            
                <span>
            
                    
                    Code Guide
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="bugGuideBasicNotes.html">
            
                <a href="bugGuideBasicNotes.html">
            
                    
                    Bug Guide Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.2" data-path="cleanCodeBasicNotes.html">
            
                <a href="cleanCodeBasicNotes.html">
            
                    
                    Clean Code Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.3" data-path="codeReviewBasicNotes.html">
            
                <a href="codeReviewBasicNotes.html">
            
                    
                    Code Review Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.4.2.4" data-path="designPatternsNotes.html">
            
                <a href="designPatternsNotes.html">
            
                    
                    Design Patterns Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3" >
            
                <span>
            
                    
                    Functional Programming
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.3.1" data-path="../functionalProgramming/functionalProgrammingBasicNotes.html">
            
                <a href="../functionalProgramming/functionalProgrammingBasicNotes.html">
            
                    
                    Functional Programming Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.4" >
            
                <span>
            
                    
                    Game
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.4.1" data-path="../game/gameDesignBasicNotes.html">
            
                <a href="../game/gameDesignBasicNotes.html">
            
                    
                    Game Design Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.5" >
            
                <span>
            
                    
                    Linux
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.5.1" data-path="../linux/linuxBasicNotes.html">
            
                <a href="../linux/linuxBasicNotes.html">
            
                    
                    Linux Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.6" >
            
                <span>
            
                    
                    Server
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.6.1" data-path="../server/messageQueueBasicNotes.html">
            
                <a href="../server/messageQueueBasicNotes.html">
            
                    
                    Message Queue Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.7" >
            
                <span>
            
                    
                    Tools
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.7.1" >
            
                <span>
            
                    
                    Build Tools
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.7.1.1" data-path="../tools/buildTools/CmakeBasicNotes.html">
            
                <a href="../tools/buildTools/CmakeBasicNotes.html">
            
                    
                    Cmake Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7.1.2" data-path="../tools/buildTools/makefileBasicNotes.html">
            
                <a href="../tools/buildTools/makefileBasicNotes.html">
            
                    
                    Makefile Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.7.2" >
            
                <span>
            
                    
                    Git
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.7.2.1" data-path="../tools/git/gitBasicNotes.html">
            
                <a href="../tools/git/gitBasicNotes.html">
            
                    
                    Git Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.7.3" >
            
                <span>
            
                    
                    Vim
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.7.3.1" data-path="../tools/vim/vimBasicNotes.html">
            
                <a href="../tools/vim/vimBasicNotes.html">
            
                    
                    Vim Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.8" >
            
                <span>
            
                    
                    Web
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.8.1" >
            
                <span>
            
                    
                    Angular
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.8.1.1" data-path="../web/angular/angularBasicNotes.html">
            
                <a href="../web/angular/angularBasicNotes.html">
            
                    
                    Angular Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.8.2" >
            
                <span>
            
                    
                    Css
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.8.2.1" data-path="../web/css/bootstrapBasicNotes.html">
            
                <a href="../web/css/bootstrapBasicNotes.html">
            
                    
                    Bootstrap Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8.2.2" data-path="../web/css/cssAdvancedNotes.html">
            
                <a href="../web/css/cssAdvancedNotes.html">
            
                    
                    Css Advanced Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8.2.3" data-path="../web/css/cssBasicNotes.html">
            
                <a href="../web/css/cssBasicNotes.html">
            
                    
                    Css Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8.2.4" data-path="../web/css/sassBasicNotes.html">
            
                <a href="../web/css/sassBasicNotes.html">
            
                    
                    Sass Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8.2.5" data-path="../web/css/sassOfficalReference.html">
            
                <a href="../web/css/sassOfficalReference.html">
            
                    
                    Sass Offical Reference
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.8.3" >
            
                <span>
            
                    
                    Frameworks
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.8.3.1" data-path="../web/frameworks/electronBasicNotes.html">
            
                <a href="../web/frameworks/electronBasicNotes.html">
            
                    
                    Electron Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8.3.2" data-path="../web/frameworks/jQueryBasicNotes.html">
            
                <a href="../web/frameworks/jQueryBasicNotes.html">
            
                    
                    J Query Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.8.4" >
            
                <span>
            
                    
                    Html
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.8.4.1" data-path="../web/html/htmlBasicNotes.html">
            
                <a href="../web/html/htmlBasicNotes.html">
            
                    
                    Html Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.8.5" >
            
                <span>
            
                    
                    Javascript
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.8.5.1" data-path="../web/javascript/javascriptAdvancedNotes.html">
            
                <a href="../web/javascript/javascriptAdvancedNotes.html">
            
                    
                    Javascript Advanced Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8.5.2" data-path="../web/javascript/javascriptBasicNotes.html">
            
                <a href="../web/javascript/javascriptBasicNotes.html">
            
                    
                    Javascript Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8.5.3" data-path="../web/javascript/typescriptBasicNotes.html">
            
                <a href="../web/javascript/typescriptBasicNotes.html">
            
                    
                    Typescript Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.8.6" >
            
                <span>
            
                    
                    Nodejs
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.8.6.1" data-path="../web/nodejs/expressBasicNotes.html">
            
                <a href="../web/nodejs/expressBasicNotes.html">
            
                    
                    Express Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8.6.2" data-path="../web/nodejs/graphqlBasicNotes.html">
            
                <a href="../web/nodejs/graphqlBasicNotes.html">
            
                    
                    Graphql Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8.6.3" data-path="../web/nodejs/nodejsBasicNotes.html">
            
                <a href="../web/nodejs/nodejsBasicNotes.html">
            
                    
                    Nodejs Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.8.7" >
            
                <span>
            
                    
                    Reactjs
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.8.7.1" data-path="../web/reactjs/reactjsBasicNotes.html">
            
                <a href="../web/reactjs/reactjsBasicNotes.html">
            
                    
                    Reactjs Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8.7.2" data-path="../web/reactjs/reactRouterBasicNotes.html">
            
                <a href="../web/reactjs/reactRouterBasicNotes.html">
            
                    
                    React Router Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8.7.3" data-path="../web/reactjs/reduxBasicNotes.html">
            
                <a href="../web/reactjs/reduxBasicNotes.html">
            
                    
                    Redux Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8.7.4" data-path="../web/reactjs/webpackBasicNotes.html">
            
                <a href="../web/reactjs/webpackBasicNotes.html">
            
                    
                    Webpack Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.8.8" >
            
                <span>
            
                    
                    Security
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.8.8.1" data-path="../web/security/securityBasicNotes.html">
            
                <a href="../web/security/securityBasicNotes.html">
            
                    
                    Security Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.8.9" >
            
                <span>
            
                    
                    Vuejs
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.8.9.1" data-path="../web/vuejs/vueBasicNotes.html">
            
                <a href="../web/vuejs/vueBasicNotes.html">
            
                    
                    Vue Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.8.10" data-path="../web/libraryBasicNotes.html">
            
                <a href="../web/libraryBasicNotes.html">
            
                    
                    Library Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Design Patterns Notes</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div class="search-plus" id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#design-patterns-notes"><b> </b>Design Patterns Notes</a></li><ul><li><span class="title-icon "></span><a href="#baisc-patterns"><b>1. </b>Baisc Patterns</a></li><ul><li><span class="title-icon "></span><a href="#solid-&#x539F;&#x5219;"><b>1.1. </b>SOLID &#x539F;&#x5219;</a></li><li><span class="title-icon "></span><a href="#literal-pattern"><b>1.2. </b>Literal Pattern</a></li><li><span class="title-icon "></span><a href="#closure-and-iife"><b>1.3. </b>Closure and IIFE</a></li><li><span class="title-icon "></span><a href="#check-pattern"><b>1.4. </b>Check Pattern</a></li><li><span class="title-icon "></span><a href="#&#x51FD;&#x6570;function"><b>1.5. </b>&#x51FD;&#x6570;(function)</a></li><li><span class="title-icon "></span><a href="#&#x89E3;&#x8026;"><b>1.6. </b>&#x89E3;&#x8026;</a></li><li><span class="title-icon "></span><a href="#env-and-config"><b>1.7. </b>Env and Config</a></li><li><span class="title-icon "></span><a href="#stand-library-idioms"><b>1.8. </b>Stand Library Idioms</a></li><li><span class="title-icon "></span><a href="#other"><b>1.9. </b>Other</a></li></ul><li><span class="title-icon "></span><a href="#modular-patterns"><b>2. </b>Modular Patterns</a></li><ul><li><span class="title-icon "></span><a href="#object-literal"><b>2.1. </b>Object Literal</a></li><li><span class="title-icon "></span><a href="#&#x7ACB;&#x5373;&#x51FD;&#x6570;&#x6A21;&#x5F0F;iife"><b>2.2. </b>&#x7ACB;&#x5373;&#x51FD;&#x6570;&#x6A21;&#x5F0F;(IIFE)</a></li><li><span class="title-icon "></span><a href="#umduniversal-module-definition-pattern"><b>2.3. </b>UMD(Universal Module Definition) Pattern</a></li></ul><li><span class="title-icon "></span><a href="#common-design-patterns"><b>3. </b>Common Design Patterns</a></li><ul><li><span class="title-icon "></span><a href="#classification"><b>3.1. </b>Classification</a></li><li><span class="title-icon "></span><a href="#prototype"><b>3.2. </b>Prototype</a></li><li><span class="title-icon "></span><a href="#bridge"><b>3.3. </b>Bridge</a></li><li><span class="title-icon "></span><a href="#composite"><b>3.4. </b>Composite</a></li><li><span class="title-icon "></span><a href="#strategy"><b>3.5. </b>Strategy</a></li><li><span class="title-icon "></span><a href="#state"><b>3.6. </b>State</a></li><li><span class="title-icon "></span><a href="#iterator"><b>3.7. </b>Iterator</a></li><li><span class="title-icon "></span><a href="#ioc-and-di"><b>3.8. </b>IOC and DI</a></li><li><span class="title-icon "></span><a href="#class-pattern"><b>3.9. </b>Class Pattern</a></li><li><span class="title-icon "></span><a href="#mix-in-pattern"><b>3.10. </b>Mix-In Pattern</a></li><li><span class="title-icon "></span><a href="#singleton-pattern"><b>3.11. </b>Singleton Pattern</a></li><li><span class="title-icon "></span><a href="#abstract-factory"><b>3.12. </b>Abstract Factory</a></li><li><span class="title-icon "></span><a href="#factory-method"><b>3.13. </b>Factory Method</a></li><li><span class="title-icon "></span><a href="#adapter-pattern"><b>3.14. </b>Adapter Pattern</a></li><li><span class="title-icon "></span><a href="#decorator-pattern"><b>3.15. </b>Decorator Pattern</a></li><li><span class="title-icon "></span><a href="#facade-pattern"><b>3.16. </b>Facade Pattern</a></li><li><span class="title-icon "></span><a href="#flyweight-pattern"><b>3.17. </b>Flyweight Pattern</a></li><li><span class="title-icon "></span><a href="#proxy-pattern"><b>3.18. </b>Proxy Pattern</a></li><li><span class="title-icon "></span><a href="#command-pattern"><b>3.19. </b>Command Pattern</a></li><li><span class="title-icon "></span><a href="#mediator-pattern"><b>3.20. </b>Mediator Pattern</a></li><li><span class="title-icon "></span><a href="#observer-pattern"><b>3.21. </b>Observer Pattern</a></li><li><span class="title-icon "></span><a href="#pub-sub-pattern"><b>3.22. </b>Pub-Sub Pattern</a></li></ul><li><span class="title-icon "></span><a href="#mv-pattern"><b>4. </b>MV* Pattern</a></li><li><span class="title-icon "></span><a href="#jquery-pattern"><b>5. </b>jQuery Pattern</a></li><ul><li><span class="title-icon "></span><a href="#plugin-pattern"><b>5.1. </b>Plugin Pattern</a></li></ul></ul></ul></div><a href="#design-patterns-notes" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="design-patterns-notes"><a name="design-patterns-notes" class="anchor-navigation-ex-anchor" href="#design-patterns-notes"><i class="fa fa-link" aria-hidden="true"></i></a> Design Patterns Notes</h1>
<!-- TOC -->
<ul>
<li><a href="#design-patterns-notes">Design Patterns Notes</a><ul>
<li><a href="#baisc-patterns">Baisc Patterns</a><ul>
<li><a href="#solid-&#x539F;&#x5219;">SOLID &#x539F;&#x5219;</a></li>
<li><a href="#literal-pattern">Literal Pattern</a></li>
<li><a href="#closure-and-iife">Closure and IIFE</a></li>
<li><a href="#check-pattern">Check Pattern</a></li>
<li><a href="#&#x51FD;&#x6570;function">&#x51FD;&#x6570;(function)</a><ul>
<li><a href="#&#x53C2;&#x6570;">&#x53C2;&#x6570;</a></li>
</ul>
</li>
<li><a href="#&#x89E3;&#x8026;">&#x89E3;&#x8026;</a><ul>
<li><a href="#&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x4E0E;-ui-&#x903B;&#x8F91;">&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x4E0E; UI &#x903B;&#x8F91;</a></li>
</ul>
</li>
<li><a href="#env-and-config">Env and Config</a></li>
<li><a href="#stand-library-idioms">Stand Library Idioms</a></li>
<li><a href="#other">Other</a></li>
</ul>
</li>
<li><a href="#modular-patterns">Modular Patterns</a><ul>
<li><a href="#object-literal">Object Literal</a></li>
<li><a href="#&#x7ACB;&#x5373;&#x51FD;&#x6570;&#x6A21;&#x5F0F;iife">&#x7ACB;&#x5373;&#x51FD;&#x6570;&#x6A21;&#x5F0F;(IIFE)</a></li>
<li><a href="#umduniversal-module-definition-pattern">UMD(Universal Module Definition) Pattern</a></li>
</ul>
</li>
<li><a href="#common-design-patterns">Common Design Patterns</a><ul>
<li><a href="#classification">Classification</a><ul>
<li><a href="#creational-patterns">Creational Patterns</a></li>
<li><a href="#structural-patterns">Structural Patterns</a></li>
<li><a href="#behavioral-patterns">Behavioral Patterns</a></li>
</ul>
</li>
<li><a href="#prototype">Prototype</a></li>
<li><a href="#bridge">Bridge</a></li>
<li><a href="#composite">Composite</a></li>
<li><a href="#strategy">Strategy</a></li>
<li><a href="#state">State</a></li>
<li><a href="#iterator">Iterator</a></li>
<li><a href="#ioc-and-di">IOC and DI</a></li>
<li><a href="#class-pattern">Class Pattern</a></li>
<li><a href="#mix-in-pattern">Mix-In Pattern</a></li>
<li><a href="#singleton-pattern">Singleton Pattern</a></li>
<li><a href="#abstract-factory">Abstract Factory</a></li>
<li><a href="#factory-method">Factory Method</a></li>
<li><a href="#adapter-pattern">Adapter Pattern</a></li>
<li><a href="#decorator-pattern">Decorator Pattern</a><ul>
<li><a href="#&#x5B9E;&#x73B0;-1&#x5173;&#x952E;---&#x5B9E;&#x73B0;&#x4F20;&#x9012;&#x65B9;&#x5F0F;">&#x5B9E;&#x73B0; 1(&#x5173;&#x952E; - &#x5B9E;&#x73B0;&#x4F20;&#x9012;&#x65B9;&#x5F0F;)</a></li>
<li><a href="#return-thisuberfunction">return this.uber.function()</a></li>
<li><a href="#decorators-list">Decorators List</a></li>
<li><a href="#&#x5B9E;&#x73B0;-2">&#x5B9E;&#x73B0; 2</a></li>
</ul>
</li>
<li><a href="#facade-pattern">Facade Pattern</a></li>
<li><a href="#flyweight-pattern">Flyweight Pattern</a></li>
<li><a href="#proxy-pattern">Proxy Pattern</a></li>
<li><a href="#command-pattern">Command Pattern</a></li>
<li><a href="#mediator-pattern">Mediator Pattern</a></li>
<li><a href="#observer-pattern">Observer Pattern</a></li>
<li><a href="#pub-sub-pattern">Pub-Sub Pattern</a><ul>
<li><a href="#implementation">Implementation</a></li>
<li><a href="#sample">Sample</a><ul>
<li><a href="#ajax-callback">Ajax Callback</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#mv-pattern">MV* Pattern</a></li>
<li><a href="#jquery-pattern">jQuery Pattern</a><ul>
<li><a href="#plugin-pattern">Plugin Pattern</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- /TOC -->
<p><a href="http://www.dofactory.com/javascript/design-patterns" target="_blank">Awesome Book</a></p>
<h2 id="baisc-patterns"><a name="baisc-patterns" class="anchor-navigation-ex-anchor" href="#baisc-patterns"><i class="fa fa-link" aria-hidden="true"></i></a>1. Baisc Patterns</h2>
<h3 id="solid-&#x539F;&#x5219;"><a name="solid-&#x539F;&#x5219;" class="anchor-navigation-ex-anchor" href="#solid-&#x539F;&#x5219;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. SOLID &#x539F;&#x5219;</h3>
<ul>
<li>Single Responsibility Principle &#x5355;&#x4E00;&#x529F;&#x80FD;&#x539F;&#x5219;</li>
<li>Open/Closed Principle &#x5F00;&#x95ED;&#x539F;&#x5219;</li>
<li>Liskov Substitution Principle &#x91CC;&#x6C0F;&#x66FF;&#x6362;&#x539F;&#x5219;</li>
<li>Interface Segregation Principle &#x63A5;&#x53E3;&#x9694;&#x79BB;&#x539F;&#x5219;</li>
<li>Dependency Inversion Principle &#x4F9D;&#x8D56;&#x53CD;&#x8F6C;&#x539F;&#x5219;</li>
</ul>
<blockquote>
<p>SOLID Principles</p>
</blockquote>
<ul>
<li>&#x5355;&#x4E00;&#x804C;&#x8D23;&#x662F;&#x6240;&#x6709;&#x8BBE;&#x8BA1;&#x539F;&#x5219;&#x7684;&#x57FA;&#x7840;</li>
<li>&#x5F00;&#x95ED;&#x539F;&#x5219;&#x662F;&#x8BBE;&#x8BA1;&#x7684;&#x7EC8;&#x6781;&#x76EE;&#x6807;</li>
<li>&#x91CC;&#x6C0F;&#x66FF;&#x6362;&#x539F;&#x5219;&#x5F3A;&#x8C03;&#x7684;&#x662F;&#x5B50;&#x7C7B;&#x66FF;&#x6362;&#x7236;&#x7C7B;&#x540E;&#x7A0B;&#x5E8F;&#x8FD0;&#x884C;&#x65F6;&#x7684;&#x6B63;&#x786E;&#x6027;, &#x5B83;&#x7528;&#x6765;&#x5E2E;&#x52A9;&#x5B9E;&#x73B0;&#x5F00;&#x95ED;&#x539F;&#x5219;</li>
<li>&#x63A5;&#x53E3;&#x9694;&#x79BB;&#x539F;&#x5219;&#x7528;&#x6765;&#x5E2E;&#x52A9;&#x5B9E;&#x73B0;&#x91CC;&#x6C0F;&#x66FF;&#x6362;&#x539F;&#x5219;, &#x540C;&#x65F6;&#x5B83;&#x4E5F;&#x4F53;&#x73B0;&#x4E86;&#x5355;&#x4E00;&#x804C;&#x8D23;</li>
<li>&#x4F9D;&#x8D56;&#x5012;&#x7F6E;&#x539F;&#x5219;&#x662F;&#x8FC7;&#x7A0B;&#x5F0F;&#x8BBE;&#x8BA1;&#x4E0E;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x8BBE;&#x8BA1;&#x7684;&#x5206;&#x6C34;&#x5CAD;, &#x540C;&#x65F6;&#x5B83;&#x4E5F;&#x88AB;&#x7528;&#x6765;&#x6307;&#x5BFC;&#x63A5;&#x53E3;&#x9694;&#x79BB;&#x539F;&#x5219;</li>
</ul>
<h3 id="literal-pattern"><a name="literal-pattern" class="anchor-navigation-ex-anchor" href="#literal-pattern"><i class="fa fa-link" aria-hidden="true"></i></a>1.2. Literal Pattern</h3>
<ul>
<li>&#x4E0D;&#x8981;&#x4F7F;&#x7528; new Boolean()/new Number()/new String()</li>
<li>&#x907F;&#x514D;&#x4F7F;&#x7528; new Object()/new Array()</li>
</ul>
<h3 id="closure-and-iife"><a name="closure-and-iife" class="anchor-navigation-ex-anchor" href="#closure-and-iife"><i class="fa fa-link" aria-hidden="true"></i></a>1.3. Closure and IIFE</h3>
<h3 id="check-pattern"><a name="check-pattern" class="anchor-navigation-ex-anchor" href="#check-pattern"><i class="fa fa-link" aria-hidden="true"></i></a>1.4. Check Pattern</h3>
<ul>
<li><code>O || {}</code> <code>O || (O = {})</code></li>
<li><code>if (O &amp;&amp; O.property)</code></li>
<li><code>if (typeof v === &quot; &quot;)</code></li>
<li><code>toString. apply(var)</code></li>
</ul>
<h3 id="&#x51FD;&#x6570;function"><a name="&#x51FD;&#x6570;function" class="anchor-navigation-ex-anchor" href="#&#x51FD;&#x6570;function"><i class="fa fa-link" aria-hidden="true"></i></a>1.5. &#x51FD;&#x6570;(function)</h3>
<h4 id="&#x53C2;&#x6570;"><a name="&#x53C2;&#x6570;" class="anchor-navigation-ex-anchor" href="#&#x53C2;&#x6570;"><i class="fa fa-link" aria-hidden="true"></i></a><a name="&#x53C2;&#x6570;" class="plugin-anchor" href="#&#x53C2;&#x6570;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x53C2;&#x6570;</h4>
<ul>
<li>&#x51FD;&#x6570;&#x4E0D;&#x5E94;&#x4F9D;&#x8D56;&#x4E8E;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#xFF0C;&#x5B9E;&#x73B0;&#x4E0E;&#x6267;&#x884C;&#x5168;&#x5C40;&#x73AF;&#x5883;&#x7684;&#x7684;&#x89E3;&#x8026;</li>
<li>&#x5168;&#x5C40;&#x53D8;&#x91CF;&#x5E94;&#x4EE5;&#x51FD;&#x6570;&#x53C2;&#x6570;/&#x4F9D;&#x8D56;&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x6CE8;&#x5165;&#x51FD;&#x6570;&#x5185;&#x90E8;</li>
</ul>
<h3 id="&#x89E3;&#x8026;"><a name="&#x89E3;&#x8026;" class="anchor-navigation-ex-anchor" href="#&#x89E3;&#x8026;"><i class="fa fa-link" aria-hidden="true"></i></a>1.6. &#x89E3;&#x8026;</h3>
<h4 id="&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x4E0E;-ui-&#x903B;&#x8F91;"><a name="&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x4E0E;-ui-&#x903B;&#x8F91;" class="anchor-navigation-ex-anchor" href="#&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x4E0E;-ui-&#x903B;&#x8F91;"><i class="fa fa-link" aria-hidden="true"></i></a><a name="&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x4E0E;-ui-&#x903B;&#x8F91;" class="plugin-anchor" href="#&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x4E0E;-ui-&#x903B;&#x8F91;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x4E0E; UI &#x903B;&#x8F91;</h4>
<ul>
<li>&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x51FD;&#x6570;&#x4E0E;&#x5E94;&#x7528;&#x903B;&#x8F91;&#x51FD;&#x6570;&#x5206;&#x5F00;&#x6210;&#x5355;&#x72EC;&#x51FD;&#x6570;,&#x63D0;&#x9AD8;&#x4EE3;&#x7801;&#x91CD;&#x7528;&#x7387;</li>
<li>&#x5E94;&#x7528;&#x903B;&#x8F91;&#x51FD;&#x6570;&#x4E0D;&#x4F9D;&#x8D56;&#x4E8E; event &#x5BF9;&#x8C61;&#xFF0C;&#x5176;&#x5C5E;&#x6027;&#x503C;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x4F20;&#x5165;&#xFF0C;&#x6613;&#x4E8E;&#x89E3;&#x8026;&#x4E0E;&#x6D4B;&#x8BD5;</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> MyApp <span class="token operator">=</span> <span class="token punctuation">{</span>

    <span class="token comment">// &#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x51FD;&#x6570;</span>
    <span class="token function-variable function">handleClick</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">/* &#x5C06;&#x4E8B;&#x4EF6;&#x7684;&#x5C5E;&#x6027;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#xFF0C;&#x4F20;&#x9012;&#x7ED9;&#x5E94;&#x7528;&#x903B;&#x8F91;&#x51FD;&#x6570;
         * &#x4F7F;&#x5F97;&#x5E94;&#x7528;&#x903B;&#x8F91;&#x51FD;&#x6570;&#x4E0D;&#x4F9D;&#x8D56;&#x4E8E; event &#x5BF9;&#x8C61;&#xFF0C;&#x6613;&#x4E8E;&#x89E3;&#x8026;&#x4E0E;&#x6D4B;&#x8BD5;
         */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">showPopup</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>clientX<span class="token punctuation">,</span> event<span class="token punctuation">.</span>clientY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// &#x5E94;&#x7528;&#x903B;&#x8F91;&#x51FD;&#x6570;</span>
    <span class="token function-variable function">showPopup</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> popup <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&apos;popup&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        popup<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token string">&apos;px&apos;</span><span class="token punctuation">;</span>
        popup<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top  <span class="token operator">=</span> y <span class="token operator">+</span> <span class="token string">&apos;px&apos;</span><span class="token punctuation">;</span>
        popup<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">&apos;reveal&apos;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="env-and-config"><a name="env-and-config" class="anchor-navigation-ex-anchor" href="#env-and-config"><i class="fa fa-link" aria-hidden="true"></i></a>1.7. Env and Config</h3>
<p>&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4EE5; .env/JS(Object)/JSON/JSONP/XML/YML &#x683C;&#x5F0F;&#x5355;&#x72EC;&#x5B58;&#x653E;&#xFF0C;&#x65B9;&#x4FBF;&#x8BFB;&#x53D6;</p>
<h3 id="stand-library-idioms"><a name="stand-library-idioms" class="anchor-navigation-ex-anchor" href="#stand-library-idioms"><i class="fa fa-link" aria-hidden="true"></i></a>1.8. Stand Library Idioms</h3>
<ul>
<li>use <code>Number.isNaN</code> not <code>isNaN</code></li>
<li>use <code>Number.isFinite</code> not <code>isFinite</code></li>
</ul>
<h3 id="other"><a name="other" class="anchor-navigation-ex-anchor" href="#other"><i class="fa fa-link" aria-hidden="true"></i></a>1.9. Other</h3>
<p>!!result &#x8F6C;&#x5316;&#x6210; Boolean</p>
<h2 id="modular-patterns"><a name="modular-patterns" class="anchor-navigation-ex-anchor" href="#modular-patterns"><i class="fa fa-link" aria-hidden="true"></i></a>2. Modular Patterns</h2>
<h3 id="object-literal"><a name="object-literal" class="anchor-navigation-ex-anchor" href="#object-literal"><i class="fa fa-link" aria-hidden="true"></i></a>2.1. Object Literal</h3>
<p>&#x901A;&#x8FC7;&#x5BF9;&#x8C61;&#x5B57;&#x9762;&#x91CF;&#x521B;&#x5EFA;&#x547D;&#x540D;&#x7A7A;&#x95F4;</p>
<pre class="language-"><code class="lang-javascript"><span class="token constant">MYAPP</span><span class="token punctuation">.</span><span class="token function-variable function">namespace</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">namespaceString</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> parts <span class="token operator">=</span> namespaceString<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&apos;.&apos;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    parent <span class="token operator">=</span> <span class="token constant">MYAPP</span><span class="token punctuation">,</span>
    i<span class="token punctuation">;</span>
  <span class="token comment">// strip redundant leading global</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&apos;MYAPP&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// remove leading global</span>
    parts <span class="token operator">=</span> parts<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> parts<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// create a property if it doesn&apos;t exist</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> parent<span class="token punctuation">[</span>parts<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&apos;undefined&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      parent<span class="token punctuation">[</span>parts<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//&#x5173;&#x952E;: &#x5411;&#x5185;&#x5D4C;&#x5957;</span>
    parent <span class="token operator">=</span> parent<span class="token punctuation">[</span>parts<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// &#x8FD4;&#x56DE;&#x6700;&#x5185;&#x5C42;&#x6A21;&#x5757;</span>
  <span class="token keyword">return</span> parent<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<pre class="language-"><code class="lang-javascript"><span class="token comment">// assign returned value to a local var</span>
<span class="token keyword">var</span> module2 <span class="token operator">=</span> <span class="token constant">MYAPP</span><span class="token punctuation">.</span><span class="token function">namespace</span><span class="token punctuation">(</span><span class="token string">&apos;MYAPP.modules.module2&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module2 <span class="token operator">===</span> <span class="token constant">MYAPP</span><span class="token punctuation">.</span>modules<span class="token punctuation">.</span>module2<span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token comment">// skip initial `MYAPP`</span>
<span class="token constant">MYAPP</span><span class="token punctuation">.</span><span class="token function">namespace</span><span class="token punctuation">(</span><span class="token string">&apos;modules.module51&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// long namespace</span>
<span class="token constant">MYAPP</span><span class="token punctuation">.</span><span class="token function">namespace</span><span class="token punctuation">(</span><span class="token string">&apos;once.upon.a.time.there.was.this.long.nested.property&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="&#x7ACB;&#x5373;&#x51FD;&#x6570;&#x6A21;&#x5F0F;iife"><a name="&#x7ACB;&#x5373;&#x51FD;&#x6570;&#x6A21;&#x5F0F;iife" class="anchor-navigation-ex-anchor" href="#&#x7ACB;&#x5373;&#x51FD;&#x6570;&#x6A21;&#x5F0F;iife"><i class="fa fa-link" aria-hidden="true"></i></a>2.2. &#x7ACB;&#x5373;&#x51FD;&#x6570;&#x6A21;&#x5F0F;(IIFE)</h3>
<p>&#x901A;&#x8FC7;&#x8C03;&#x7528;&#x7ACB;&#x5373;&#x51FD;&#x6570;&#xFF0C;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x66B4;&#x9732;(exposed to public)&#x516C;&#x5171;&#x63A5;&#x53E3;(&#x7279;&#x6743;/&#x516C;&#x5171;&#x65B9;&#x6CD5;):</p>
<ul>
<li>&#x95ED;&#x5305;: &#x5B9A;&#x4E49;&#x79C1;&#x6709;&#x53D8;&#x91CF;&#x4E0E;&#x7279;&#x6743;&#x65B9;&#x6CD5;</li>
<li>&#x8FD4;&#x56DE;&#x5BF9;&#x8C61;: &#x5373;&#x4F7F;&#x901A;&#x8FC7;&#x5916;&#x90E8;&#x4EE3;&#x7801;&#x6539;&#x53D8;&#x8FD4;&#x56DE;&#x5BF9;&#x8C61;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x4E5F;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;&#x539F;&#x63A5;&#x53E3;</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> myobj <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// private member</span>
  <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;tazimi&quot;</span><span class="token punctuation">,</span>

    <span class="token comment">// private method</span>
    <span class="token comment">// excluded in return object</span>

      <span class="token comment">// privileged method</span>
      <span class="token keyword">function</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> n <span class="token operator">===</span> <span class="token string">&apos;string&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          name <span class="token operator">=</span> n<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// public method</span>
    <span class="token keyword">function</span> <span class="token function">logName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// &#x95ED;&#x5305;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x516C;&#x5171;&#x63A5;&#x53E3;: &#x7279;&#x6743;/&#x516C;&#x5171;&#x65B9;&#x6CD5;</span>

        <span class="token comment">// &#x7279;&#x6743;&#x65B9;&#x6CD5;</span>
      getName<span class="token operator">:</span> getName<span class="token punctuation">,</span>
    setName<span class="token operator">:</span> setName<span class="token punctuation">,</span>

    <span class="token comment">// &#x516C;&#x5171;&#x65B9;&#x6CD5;</span>
    log<span class="token operator">:</span> logName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> myApp <span class="token operator">=</span> myApp <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
myApp<span class="token punctuation">.</span>utils <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> val <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getValue</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> val<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">setValue</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    val <span class="token operator">=</span> newVal<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// also introduce a new sub-namespace</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>tools <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>myApp<span class="token punctuation">.</span>utils<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// inject new behaviour into the tools namespace</span>
<span class="token comment">// which we defined via the utilities module</span>

<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">diagnose</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&apos;diagnosis&apos;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>myApp<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>tools<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li>jQuery Plugin Pattern: &#x901A;&#x8FC7;&#x7ED9;&#x7ACB;&#x5373;&#x51FD;&#x6570;&#x4F20;&#x53C2;&#xFF0C;&#x6CE8;&#x5165;&#x5168;&#x5C40;&#x53D8;&#x91CF;/&#x5176;&#x4ED6;&#x4F9D;&#x8D56;</li>
</ul>
<h3 id="umduniversal-module-definition-pattern"><a name="umduniversal-module-definition-pattern" class="anchor-navigation-ex-anchor" href="#umduniversal-module-definition-pattern"><i class="fa fa-link" aria-hidden="true"></i></a>2.3. UMD(Universal Module Definition) Pattern</h3>
<ul>
<li>&#x5148;&#x5224;&#x65AD;&#x662F;&#x5426;&#x652F;&#x6301; Node.js &#x7684;&#x6A21;&#x5757;(exports)&#xFF0C;&#x5B58;&#x5728;&#x5219;&#x4F7F;&#x7528; Node.js &#x6A21;&#x5757;&#x6A21;&#x5F0F;</li>
<li>&#x518D;&#x5224;&#x65AD;&#x662F;&#x5426;&#x652F;&#x6301; AMD(define)&#xFF0C;&#x5B58;&#x5728;&#x5219;&#x4F7F;&#x7528; AMD &#x65B9;&#x5F0F;&#x52A0;&#x8F7D;&#x6A21;&#x5757;</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">window<span class="token punctuation">,</span> factory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">&apos;object&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> define <span class="token operator">===</span> <span class="token string">&apos;function&apos;</span> <span class="token operator">&amp;&amp;</span> define<span class="token punctuation">.</span>amd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">define</span><span class="token punctuation">(</span>factory<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span>eventUtil <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//module ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="common-design-patterns"><a name="common-design-patterns" class="anchor-navigation-ex-anchor" href="#common-design-patterns"><i class="fa fa-link" aria-hidden="true"></i></a>3. Common Design Patterns</h2>
<h3 id="classification"><a name="classification" class="anchor-navigation-ex-anchor" href="#classification"><i class="fa fa-link" aria-hidden="true"></i></a>3.1. Classification</h3>
<h4 id="creational-patterns"><a name="creational-patterns" class="anchor-navigation-ex-anchor" href="#creational-patterns"><i class="fa fa-link" aria-hidden="true"></i></a><a name="creational-patterns" class="plugin-anchor" href="#creational-patterns"><i class="fa fa-link" aria-hidden="true"></i></a>Creational Patterns</h4>
<ul>
<li>Factory Method(&#x5DE5;&#x5382;&#x65B9;&#x6CD5;) | &#x901A;&#x8FC7;&#x5C06;&#x6570;&#x636E;&#x548C;&#x4E8B;&#x4EF6;&#x63A5;&#x53E3;&#x5316;&#x6765;&#x6784;&#x5EFA;&#x82E5;&#x5E72;&#x4E2A;&#x5B50;&#x7C7B;&#x3002;</li>
<li>Abstract Factory(&#x62BD;&#x8C61;&#x5DE5;&#x5382;) | &#x5EFA;&#x7ACB;&#x82E5;&#x5E72;&#x65CF;&#x7C7B;&#x7684;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#xFF0C;&#x8FD9;&#x4E2A;&#x5B9E;&#x4F8B;&#x4E0D;&#x9700;&#x8981;&#x5177;&#x4F53;&#x7C7B;&#x7684;&#x7EC6;&#x8282;&#x4FE1;&#x606F;&#x3002;&#xFF08;&#x62BD;&#x8C61;&#x7C7B;&#xFF09;</li>
<li>Builder(&#x5EFA;&#x9020;&#x8005;) | &#x5C06;&#x5BF9;&#x8C61;&#x7684;&#x6784;&#x5EFA;&#x65B9;&#x6CD5;&#x548C;&#x5176;&#x8868;&#x73B0;&#x5F62;&#x5F0F;&#x5206;&#x79BB;&#x5F00;&#x6765;&#xFF0C;&#x603B;&#x662F;&#x6784;&#x5EFA;&#x76F8;&#x540C;&#x7C7B;&#x578B;&#x7684;&#x5BF9;&#x8C61;&#x3002;</li>
<li>Prototype(&#x539F;&#x578B;) | &#x4E00;&#x4E2A;&#x5B8C;&#x5168;&#x521D;&#x59CB;&#x5316;&#x7684;&#x5B9E;&#x4F8B;&#xFF0C;&#x7528;&#x4E8E;&#x62F7;&#x8D1D;&#x6216;&#x8005;&#x514B;&#x9686;&#x3002;</li>
<li>Singleton(&#x5355;&#x4F8B;) | &#x4E00;&#x4E2A;&#x7C7B;&#x53EA;&#x6709;&#x552F;&#x4E00;&#x7684;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#xFF0C;&#x8FD9;&#x4E2A;&#x5B9E;&#x4F8B;&#x5728;&#x6574;&#x4E2A;&#x7A0B;&#x5E8F;&#x4E2D;&#x6709;&#x4E00;&#x4E2A;&#x5168;&#x5C40;&#x7684;&#x8BBF;&#x95EE;&#x70B9;&#x3002;</li>
</ul>
<h4 id="structural-patterns"><a name="structural-patterns" class="anchor-navigation-ex-anchor" href="#structural-patterns"><i class="fa fa-link" aria-hidden="true"></i></a><a name="structural-patterns" class="plugin-anchor" href="#structural-patterns"><i class="fa fa-link" aria-hidden="true"></i></a>Structural Patterns</h4>
<ul>
<li>Adapter(&#x9002;&#x914D;&#x5668;) : &#x5C06;&#x4E0D;&#x540C;&#x7C7B;&#x7684;&#x63A5;&#x53E3;&#x8FDB;&#x884C;&#x5339;&#x914D;&#xFF0C;&#x8C03;&#x6574;&#xFF0C;&#x8FD9;&#x6837;&#x5C3D;&#x7BA1;&#x5185;&#x90E8;&#x63A5;&#x53E3;&#x4E0D;&#x517C;&#x5BB9;&#x4F46;&#x662F;&#x4E0D;&#x540C;&#x7684;&#x7C7B;&#x8FD8;&#x662F;&#x53EF;&#x4EE5;&#x534F;&#x540C;&#x5DE5;&#x4F5C;&#x7684;&#x3002;</li>
<li>Bridge(&#x6865;&#x63A5;&#x6A21;&#x5F0F;) : &#x5C06;&#x5BF9;&#x8C61;&#x7684;&#x63A5;&#x53E3;&#x4ECE;&#x5176;&#x5B9E;&#x73B0;&#x4E2D;&#x5206;&#x79BB;&#x51FA;&#x6765;&#xFF0C;&#x8FD9;&#x6837;&#x5BF9;&#x8C61;&#x7684;&#x5B9E;&#x73B0;&#x548C;&#x63A5;&#x53E3;&#x53EF;&#x4EE5;&#x72EC;&#x7ACB;&#x7684;&#x53D8;&#x5316;&#x3002;</li>
<li>Composite(&#x7EC4;&#x5408;&#x6A21;&#x5F0F;) : &#x901A;&#x8FC7;&#x5C06;&#x7B80;&#x5355;&#x53EF;&#x7EC4;&#x5408;&#x7684;&#x5BF9;&#x8C61;&#x7EC4;&#x5408;&#x8D77;&#x6765;&#xFF0C;&#x6784;&#x6210;&#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x80FD;&#x529B;&#x5C06;&#x4F1A;&#x8D85;&#x8FC7;&#x8FD9;&#x4E9B;&#x7EC4;&#x6210;&#x90E8;&#x5206;&#x7684;&#x80FD;&#x529B;&#x7684;&#x603B;&#x548C;&#xFF0C;&#x5373;&#x4F1A;&#x6709;&#x65B0;&#x7684;&#x80FD;&#x529B;&#x4EA7;&#x751F;&#x3002;</li>
<li>Decorator(&#x88C5;&#x9970;&#x5668;) : &#x52A8;&#x6001;&#x7ED9;&#x5BF9;&#x8C61;&#x589E;&#x52A0;&#x4E00;&#x4E9B;&#x53EF;&#x66FF;&#x6362;&#x7684;&#x5904;&#x7406;&#x6D41;&#x7A0B;&#x3002;</li>
<li>Facade(&#x5916;&#x89C2;&#x6A21;&#x5F0F;) : &#x4E00;&#x4E2A;&#x7C7B;&#x9690;&#x85CF;&#x4E86;&#x5185;&#x90E8;&#x5B50;&#x7CFB;&#x7EDF;&#x7684;&#x590D;&#x6742;&#x5EA6;&#xFF0C;&#x53EA;&#x66B4;&#x9732;&#x51FA;&#x4E00;&#x4E9B;&#x7B80;&#x5355;&#x7684;&#x63A5;&#x53E3;&#x3002;</li>
<li>Flyweight(&#x4EAB;&#x5143;&#x6A21;&#x5F0F;) : &#x4E00;&#x4E2A;&#x7EC6;&#x7C92;&#x5EA6;&#x5BF9;&#x8C61;&#xFF0C;&#x7528;&#x4E8E;&#x5C06;&#x5305;&#x542B;&#x5728;&#x5176;&#x5B83;&#x5730;&#x65B9;&#x7684;&#x4FE1;&#x606F; &#x5728;&#x4E0D;&#x540C;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x9AD8;&#x6548;&#x5730;&#x5171;&#x4EAB;&#x3002;</li>
<li>Proxy(&#x4EE3;&#x7406;&#x6A21;&#x5F0F;) : &#x4E00;&#x4E2A;&#x5145;&#x5F53;&#x5360;&#x4F4D;&#x7B26;&#x7684;&#x5BF9;&#x8C61;&#x7528;&#x6765;&#x4EE3;&#x8868;&#x4E00;&#x4E2A;&#x771F;&#x5B9E;&#x7684;&#x5BF9;&#x8C61;&#x3002;</li>
</ul>
<h4 id="behavioral-patterns"><a name="behavioral-patterns" class="anchor-navigation-ex-anchor" href="#behavioral-patterns"><i class="fa fa-link" aria-hidden="true"></i></a><a name="behavioral-patterns" class="plugin-anchor" href="#behavioral-patterns"><i class="fa fa-link" aria-hidden="true"></i></a>Behavioral Patterns</h4>
<ul>
<li>Interpreter(&#x89E3;&#x91CA;&#x5668;) : &#x5C06;&#x8BED;&#x8A00;&#x5143;&#x7D20;&#x5305;&#x542B;&#x5728;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x4E2D;&#x7684;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;&#x7528;&#x4E8E;&#x5339;&#x914D;&#x76EE;&#x6807;&#x8BED;&#x8A00;&#x7684;&#x8BED;&#x6CD5;&#x3002;</li>
<li>Template Method(&#x6A21;&#x677F;&#x65B9;&#x6CD5;) : &#x5728;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x4E2D;&#x4E3A;&#x67D0;&#x4E2A;&#x7B97;&#x6CD5;&#x5EFA;&#x7ACB;&#x4E00;&#x5C42;&#x5916;&#x58F3;&#xFF0C;&#x5C06;&#x7B97;&#x6CD5;&#x7684;&#x5177;&#x4F53;&#x6B65;&#x9AA4;&#x4EA4;&#x4ED8;&#x7ED9;&#x5B50;&#x7C7B;&#x53BB;&#x505A;&#x3002;</li>
<li>Chain of Responsibility(&#x54CD;&#x5E94;&#x94FE;) : &#x4E00;&#x79CD;&#x5C06;&#x8BF7;&#x6C42;&#x5728;&#x4E00;&#x4E32;&#x5BF9;&#x8C61;&#x4E2D;&#x4F20;&#x9012;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5BFB;&#x627E;&#x53EF;&#x4EE5;&#x5904;&#x7406;&#x8FD9;&#x4E2A;&#x8BF7;&#x6C42;&#x7684;&#x5BF9;&#x8C61;&#x3002;</li>
<li>Command(&#x547D;&#x4EE4;) : &#x5C01;&#x88C5;&#x547D;&#x4EE4;&#x8BF7;&#x6C42;&#x4E3A;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x4ECE;&#x800C;&#x4F7F;&#x8BB0;&#x5F55;&#x65E5;&#x5FD7;&#xFF0C;&#x961F;&#x5217;&#x7F13;&#x5B58;&#x8BF7;&#x6C42;&#xFF0C;&#x672A;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x8FDB;&#x884C;&#x9519;&#x8BEF;&#x5904;&#x7406; &#x8FD9;&#x4E9B;&#x529F;&#x80FD;&#x79F0;&#x4E3A;&#x53EF;&#x80FD;&#x3002;</li>
<li>Iterator(&#x8FED;&#x4EE3;&#x5668;) : &#x5728;&#x4E0D;&#x9700;&#x8981;&#x76F4;&#x5230;&#x96C6;&#x5408;&#x5185;&#x90E8;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x987A;&#x5E8F;&#x8BBF;&#x95EE;&#x4E00;&#x4E2A;&#x96C6;&#x5408;&#x91CC;&#x9762;&#x7684;&#x5143;&#x7D20;&#x3002;</li>
<li>Mediator(&#x4E2D;&#x4ECB;&#x8005;&#x6A21;&#x5F0F;) : &#x5728;&#x7C7B;&#x4E4B;&#x95F4;&#x5B9A;&#x4E49;&#x7B80;&#x5316;&#x7684;&#x901A;&#x4FE1;&#x65B9;&#x5F0F;&#xFF0C;&#x7528;&#x4E8E;&#x907F;&#x514D;&#x7C7B;&#x4E4B;&#x95F4;&#x663E;&#x5F0F;&#x7684;&#x6301;&#x6709;&#x5F7C;&#x6B64;&#x7684;&#x5F15;&#x7528;&#x3002;</li>
<li>Observer(&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;) : &#x7528;&#x4E8E;&#x5C06;&#x53D8;&#x5316;&#x901A;&#x77E5;&#x7ED9;&#x591A;&#x4E2A;&#x7C7B;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x7C7B;&#x4E4B;&#x95F4;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x3002;</li>
<li>State(&#x72B6;&#x6001;) : &#x5F53;&#x5BF9;&#x8C61;&#x72B6;&#x6001;&#x6539;&#x53D8;&#x65F6;&#xFF0C;&#x6539;&#x53D8;&#x5BF9;&#x8C61;&#x7684;&#x884C;&#x4E3A;&#x3002;</li>
<li>Strategy(&#x7B56;&#x7565;) : &#x5C06;&#x7B97;&#x6CD5;&#x5C01;&#x88C5;&#x5230;&#x7C7B;&#x4E2D;&#xFF0C;&#x5C06;&#x9009;&#x62E9;&#x548C;&#x5B9E;&#x73B0;&#x5206;&#x79BB;&#x5F00;&#x6765;&#x3002;</li>
<li>Visitor(&#x8BBF;&#x95EE;&#x8005;) : &#x4E3A;&#x7C7B;&#x589E;&#x52A0;&#x65B0;&#x7684;&#x64CD;&#x4F5C;&#x800C;&#x4E0D;&#x6539;&#x53D8;&#x7C7B;&#x672C;&#x8EAB;&#x3002;</li>
</ul>
<h3 id="prototype"><a name="prototype" class="anchor-navigation-ex-anchor" href="#prototype"><i class="fa fa-link" aria-hidden="true"></i></a>3.2. Prototype</h3>
<p>&#x5173;&#x952E;&#x65B9;&#x6CD5; clone()</p>
<h3 id="bridge"><a name="bridge" class="anchor-navigation-ex-anchor" href="#bridge"><i class="fa fa-link" aria-hidden="true"></i></a>3.3. Bridge</h3>
<p>&#x5206;&#x79BB;&#x62BD;&#x8C61;&#x548C;&#x5B9E;&#x73B0;/&#x5206;&#x79BB;&#x5BF9;&#x8C61;&#x7684;&#x4E24;&#x79CD;&#x4E0D;&#x540C;&#x5C5E;&#x6027;</p>
<p>e.g &#x4ECE; 2 &#x4E2A;&#x4E0D;&#x540C;&#x7EF4;&#x5EA6;&#x4E0A;&#x6269;&#x5C55;&#x5BF9;&#x8C61;</p>
<h3 id="composite"><a name="composite" class="anchor-navigation-ex-anchor" href="#composite"><i class="fa fa-link" aria-hidden="true"></i></a>3.4. Composite</h3>
<p>&#x6811;&#x5F62;&#x7ED3;&#x6784;:</p>
<ul>
<li>&#x6839;&#x7ED3;&#x70B9;<ul>
<li>Component &#x62BD;&#x8C61;&#x5BF9;&#x8C61;/&#x63A5;&#x53E3; &#x91C7;&#x7528;&#x6700;&#x5927;&#x5BBD;&#x63A5;&#x53E3;,&#x5B9A;&#x4E49;&#x5185;&#x70B9;&#x548C;&#x53F6;&#x70B9;&#x7684;&#x64CD;&#x4F5C;</li>
<li>&#x5C06;&#x5185;&#x70B9;&#x7279;&#x6709;&#x7684;&#x64CD;&#x4F5C;&#x96C6;&#x8BBE;&#x4E3A;&#x7F3A;&#x7701;&#x64CD;&#x4F5C;&#x96C6;(&#x7A7A;&#x5B9E;&#x73B0;)</li>
</ul>
</li>
<li>&#x5185;&#x70B9;<ul>
<li>&#x6301;&#x6709;&#x7236;&#x7ED3;&#x70B9;&#x548C;&#x5B50;&#x8282;&#x70B9;&#x7684;&#x5F15;&#x7528;(&#x53EF;&#x4F7F;&#x7528; Flyweight &#x6A21;&#x5F0F;&#x5B9E;&#x73B0;&#x5171;&#x4EAB;)</li>
<li>&#x64CD;&#x4F5C;&#x96C6;:&#x5185;&#x70B9;&#x64CD;&#x4F5C;&#x96C6;(&#x53EF;&#x6DFB;&#x52A0;/&#x5220;&#x9664;&#x7EC4;&#x4EF6;)</li>
</ul>
</li>
<li>&#x53F6;&#x70B9;<ul>
<li>&#x6301;&#x6709;&#x7236;&#x7ED3;&#x70B9;&#x5F15;&#x7528;</li>
<li>&#x64CD;&#x4F5C;&#x96C6;&#xFF1A;&#x53F6;&#x70B9;&#x64CD;&#x4F5C;&#x96C6;(&#x4E0D;&#x53EF;&#x6DFB;&#x52A0;/&#x5220;&#x9664;&#x7EC4;&#x4EF6;)</li>
</ul>
</li>
</ul>
<h3 id="strategy"><a name="strategy" class="anchor-navigation-ex-anchor" href="#strategy"><i class="fa fa-link" aria-hidden="true"></i></a>3.5. Strategy</h3>
<p>&#x6539;&#x53D8;&#x5BF9;&#x8C61;&#x7684;&#x5185;&#x6838;/&#x7B97;&#x6CD5;, &#x4E00;&#x4E2A; Strategy &#x5BF9;&#x8C61;&#x5C01;&#x88C5;&#x4E00;&#x4E2A;&#x7B97;&#x6CD5;</p>
<h3 id="state"><a name="state" class="anchor-navigation-ex-anchor" href="#state"><i class="fa fa-link" aria-hidden="true"></i></a>3.6. State</h3>
<p>&#x4E00;&#x4E2A; State &#x5BF9;&#x8C61;&#x5C01;&#x88C5;&#x4E00;&#x4E2A;&#x4E0E;&#x72B6;&#x6001;&#x76F8;&#x5173;&#x7684;&#x884C;&#x4E3A;</p>
<h3 id="iterator"><a name="iterator" class="anchor-navigation-ex-anchor" href="#iterator"><i class="fa fa-link" aria-hidden="true"></i></a>3.7. Iterator</h3>
<p>&#x4E00;&#x4E2A; Iterator &#x5BF9;&#x8C61;&#x5C01;&#x88C5;&#x8BBF;&#x95EE;&#x548C;&#x904D;&#x5386;&#x4E00;&#x4E2A;&#x805A;&#x96C6;&#x5BF9;&#x8C61;&#x4E2D;&#x7684;&#x5404;&#x4E2A;&#x6784;&#x4EF6;&#x7684;&#x65B9;&#x6CD5;</p>
<h3 id="ioc-and-di"><a name="ioc-and-di" class="anchor-navigation-ex-anchor" href="#ioc-and-di"><i class="fa fa-link" aria-hidden="true"></i></a>3.8. IOC and DI</h3>
<ul>
<li>IOC (inversion of control) &#x63A7;&#x5236;&#x53CD;&#x8F6C;&#x6A21;&#x5F0F;&#xFF1B;&#x63A7;&#x5236;&#x53CD;&#x8F6C;&#x662F;&#x5C06;&#x7EC4;&#x4EF6;&#x95F4;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x4ECE;&#x7A0B;&#x5E8F;&#x5185;&#x90E8;&#x63D0;&#x5230;&#x5916;&#x90E8;&#x6765;&#x7BA1;&#x7406;</li>
<li>DI (dependency injection) &#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#x6A21;&#x5F0F;&#xFF1B;&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#x662F;&#x6307;&#x5C06;&#x7EC4;&#x4EF6;&#x7684;&#x4F9D;&#x8D56;&#x901A;&#x8FC7;&#x5916;&#x90E8;&#x4EE5;&#x53C2;&#x6570;&#x6216;&#x5176;&#x4ED6;&#x5F62;&#x5F0F;&#x6CE8;&#x5165;</li>
</ul>
<pre class="language-"><code class="lang-java"><span class="token keyword">class</span> <span class="token class-name">DbMysql</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> function <span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Controller</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> $db<span class="token punctuation">;</span>
  <span class="token keyword">public</span> function <span class="token function">__construct</span><span class="token punctuation">(</span>$dbMysql<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    $<span class="token keyword">this</span><span class="token operator">-&gt;</span>db <span class="token operator">=</span> $dbMysql<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> function <span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    $<span class="token keyword">this</span><span class="token operator">-&gt;</span>db<span class="token operator">-&gt;</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

$db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DbMysql</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
$c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Controller</span><span class="token punctuation">(</span>$db<span class="token punctuation">)</span><span class="token punctuation">;</span>
$c<span class="token operator">-&gt;</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>With IOC container:</p>
<pre class="language-"><code class="lang-java"><span class="token keyword">class</span> <span class="token class-name">DbMysql</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> function <span class="token function">__construct</span><span class="token punctuation">(</span>$host<span class="token punctuation">,</span> $name<span class="token punctuation">,</span> $pwd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> function <span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    echo __METHOD__ <span class="token punctuation">.</span> PHP_EOL<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">DbRedis</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> function <span class="token function">__construct</span><span class="token punctuation">(</span>$host<span class="token punctuation">,</span> $name<span class="token punctuation">,</span> $pwd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> function <span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    echo __METHOD__ <span class="token punctuation">.</span> PHP_EOL<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> controller <span class="token punctuation">{</span>
  <span class="token keyword">public</span> $mysql<span class="token punctuation">;</span>
  <span class="token keyword">public</span> $redis<span class="token punctuation">;</span>
  <span class="token keyword">public</span> function <span class="token function">__construct</span><span class="token punctuation">(</span>$mysql<span class="token punctuation">,</span> $redis<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    $<span class="token keyword">this</span><span class="token operator">-&gt;</span>mysql <span class="token operator">=</span> $mysql<span class="token punctuation">;</span>
    $<span class="token keyword">this</span><span class="token operator">-&gt;</span>redis <span class="token operator">=</span> $redis<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> function <span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    $<span class="token keyword">this</span><span class="token operator">-&gt;</span>mysql<span class="token operator">-&gt;</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    $<span class="token keyword">this</span><span class="token operator">-&gt;</span>redis<span class="token operator">-&gt;</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token keyword">class</span> <span class="token class-name">Container</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> $bindings <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> function <span class="token function">bind</span><span class="token punctuation">(</span>$key<span class="token punctuation">,</span> <span class="token class-name">Closure</span> $value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    $<span class="token keyword">this</span><span class="token operator">-&gt;</span>bindings<span class="token punctuation">[</span>$key<span class="token punctuation">]</span> <span class="token operator">=</span> $value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> function <span class="token function">make</span><span class="token punctuation">(</span>$key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    $<span class="token keyword">new</span> <span class="token operator">=</span> $<span class="token keyword">this</span><span class="token operator">-&gt;</span>bindings<span class="token punctuation">[</span>$key<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> $<span class="token keyword">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

$app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Container</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
$app<span class="token operator">-&gt;</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">&apos;mysql&apos;</span><span class="token punctuation">,</span> function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DbMysql</span><span class="token punctuation">(</span><span class="token string">&apos;host&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;name&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;pwd&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
$app<span class="token operator">-&gt;</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">&apos;redis&apos;</span><span class="token punctuation">,</span> function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DbRedis</span><span class="token punctuation">(</span><span class="token string">&apos;host&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;name&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;pwd&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
$app<span class="token operator">-&gt;</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">&apos;controller&apos;</span><span class="token punctuation">,</span> function <span class="token punctuation">(</span><span class="token punctuation">)</span> use <span class="token punctuation">(</span>$app<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Controller</span><span class="token punctuation">(</span>$app<span class="token operator">-&gt;</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string">&apos;mysql&apos;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> $app<span class="token operator">-&gt;</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string">&apos;redis&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
$controller <span class="token operator">=</span> $app<span class="token operator">-&gt;</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string">&apos;controller&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
$controller<span class="token operator">-&gt;</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/** * &#x8F93;&#x51FA;&#xFF1A; * DbMysql::query * DbRedis::set */</span>
</code></pre>
<p>With dependency injection:</p>
<pre class="language-"><code class="lang-js"><span class="token comment">// dependency provider</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">IProvider</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">provide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

@<span class="token function">injectable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">NameProvider</span> <span class="token keyword">implements</span> <span class="token class-name">IProvider</span><span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">provide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;World&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// top module</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> IProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./providers&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> readonly nameProvider<span class="token operator">:</span> IProvider<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>nameProvider<span class="token punctuation">.</span><span class="token function">provide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="class-pattern"><a name="class-pattern" class="anchor-navigation-ex-anchor" href="#class-pattern"><i class="fa fa-link" aria-hidden="true"></i></a>3.9. Class Pattern</h3>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> <span class="token function-variable function">Person</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">firstName<span class="token punctuation">,</span> lastName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">=</span> firstName<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>lastName <span class="token operator">=</span> lastName<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>gender <span class="token operator">=</span> <span class="token string">&apos;male&apos;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Define a subclass constructor for for &quot;Superhero&quot;:</span>
<span class="token keyword">var</span> <span class="token function-variable function">Superhero</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">firstName<span class="token punctuation">,</span> lastName<span class="token punctuation">,</span> powers</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Invoke the superclass constructor on the new object</span>
  <span class="token comment">// then use .call() to invoke the constructor as a method of</span>
  <span class="token comment">// the object to be initialized.</span>
  <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> firstName<span class="token punctuation">,</span> lastName<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Finally, store their powers, a new array of traits not found in a normal &quot;Person&quot;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>powers <span class="token operator">=</span> powers<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">SuperHero</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> superman <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Superhero</span><span class="token punctuation">(</span><span class="token string">&apos;Clark&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;Kent&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&apos;flight&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;heat-vision&apos;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>superman<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="mix-in-pattern"><a name="mix-in-pattern" class="anchor-navigation-ex-anchor" href="#mix-in-pattern"><i class="fa fa-link" aria-hidden="true"></i></a>3.10. Mix-In Pattern</h3>
<p>&#x5C06;&#x591A;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x5C5E;&#x6027;&#x6DF7;&#x5165;&#x540C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;,&#x8FBE;&#x5230;&#x7EE7;&#x627F;/&#x6269;&#x5C55;/&#x7EC4;&#x5408;&#x7684;&#x6548;&#x679C;</p>
<ul>
<li>&#x4E0D;&#x6539;&#x53D8;&#x539F;&#x578B;&#x94FE;</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">mix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> arg<span class="token punctuation">,</span>
    prop<span class="token punctuation">,</span>
    child <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span>arg <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> arg <span class="token operator">&lt;</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">;</span> arg <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>prop <span class="token keyword">in</span> arguments<span class="token punctuation">[</span>arg<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">[</span>arg<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>prop<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        child<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> arguments<span class="token punctuation">[</span>arg<span class="token punctuation">]</span><span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> child<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> cake <span class="token operator">=</span> <span class="token function">mix</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span> eggs<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> large<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> butter<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> salted<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> flour<span class="token operator">:</span> <span class="token string">&apos;3 cups&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> sugar<span class="token operator">:</span> <span class="token string">&apos;sure!&apos;</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li>&#x6539;&#x53D8;&#x539F;&#x578B;&#x94FE;</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token comment">// Extend an existing object with a method from another</span>
<span class="token keyword">function</span> <span class="token function">mix</span><span class="token punctuation">(</span><span class="token parameter">receivingClass<span class="token punctuation">,</span> givingClass</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// mix-in provide certain methods</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> len <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      receivingClass<span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span>
        givingClass<span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// mix-in provide obj</span>
  <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> methodName <span class="token keyword">in</span> givingClass<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>receivingClass<span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>methodName<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        receivingClass<span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>methodName<span class="token punctuation">]</span> <span class="token operator">=</span>
          givingClass<span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>methodName<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="singleton-pattern"><a name="singleton-pattern" class="anchor-navigation-ex-anchor" href="#singleton-pattern"><i class="fa fa-link" aria-hidden="true"></i></a>3.11. Singleton Pattern</h3>
<p>&#x539F;&#x578B;&#x4E0E;&#x6784;&#x9020;&#x51FD;&#x6570;&#x6307;&#x9488;&#x8FD0;&#x4F5C;&#x6B63;&#x5E38;</p>
<pre class="language-"><code class="lang-javascript"><span class="token keyword">function</span> <span class="token function">Universe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// &#x7F13;&#x5B58;&#x5B9E;&#x4F8B;</span>
  <span class="token keyword">var</span> instance<span class="token punctuation">;</span>

  <span class="token comment">// anti-Self-Defined Function Pattern</span>
  <span class="token comment">// &#x53CD;-&#x81EA;&#x5B9A;&#x4E49;&#x51FD;&#x6570;&#x6A21;&#x5F0F;: &#x5148;&#x91CD;&#x5199;,&#x518D;&#x521D;&#x59CB;&#x5316;</span>
  <span class="token function-variable function">Universe</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">Universe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// &#x4FDD;&#x5B58;&#x539F;&#x578B;,&#x4F7F;&#x5176;&#x4E00;&#x76F4;&#x4FDD;&#x6301;&#x4E8E;&#x540C;&#x4E00;&#x4F4D;&#x7F6E;</span>
  <span class="token comment">// (this&#x6307;&#x9488;&#x6307;&#x5411;&#x4E0D;&#x91CD;&#x8981;)</span>
  <span class="token class-name">Universe</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

  instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Universe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// &#x91CD;&#x5B9A;&#x5411;constructor&#x6307;&#x9488;</span>
  instance<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Universe<span class="token punctuation">;</span>
  <span class="token comment">// &#x529F;&#x80FD;&#x4EE3;&#x7801;</span>
  instance<span class="token punctuation">.</span>start_time <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  instance<span class="token punctuation">.</span>bang <span class="token operator">=</span> <span class="token string">&apos;Big&apos;</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="abstract-factory"><a name="abstract-factory" class="anchor-navigation-ex-anchor" href="#abstract-factory"><i class="fa fa-link" aria-hidden="true"></i></a>3.12. Abstract Factory</h3>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> AbstractVehicleFactory <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Storage for our vehicle types</span>
  <span class="token keyword">var</span> types <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">_getVehicle</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> customizations</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> Vehicle <span class="token operator">=</span> types<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Vehicle <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">Vehicle</span><span class="token punctuation">(</span>customizations<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">_registerVehicle</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> Vehicle</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> proto <span class="token operator">=</span> <span class="token class-name">Vehicle</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>

    <span class="token comment">// only register classes that fulfill the vehicle contract</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>proto<span class="token punctuation">.</span>drive <span class="token operator">&amp;&amp;</span> proto<span class="token punctuation">.</span>breakDown<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      types<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> Vehicle<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> AbstractVehicleFactory<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    getVehicle<span class="token operator">:</span> _getVehicle<span class="token punctuation">,</span>
    registerVehicle<span class="token operator">:</span> _registerVehicle
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="factory-method"><a name="factory-method" class="anchor-navigation-ex-anchor" href="#factory-method"><i class="fa fa-link" aria-hidden="true"></i></a>3.13. Factory Method</h3>
<pre class="language-"><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">VehicleFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> publicVehicle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// specific factory</span>
    <span class="token keyword">function</span> <span class="token function">Car</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">&apos;car&apos;</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>doors <span class="token operator">=</span> options<span class="token punctuation">.</span>doors <span class="token operator">||</span> <span class="token number">4</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> options<span class="token punctuation">.</span>state <span class="token operator">||</span> <span class="token string">&apos;brand new&apos;</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> options<span class="token punctuation">.</span>color <span class="token operator">||</span> <span class="token string">&apos;silver&apos;</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>speed <span class="token operator">=</span> options<span class="token punctuation">.</span>speed <span class="token operator">||</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">Truck</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">&apos;truck&apos;</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> options<span class="token punctuation">.</span>state <span class="token operator">||</span> <span class="token string">&apos;used&apos;</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>wheelSize <span class="token operator">=</span> options<span class="token punctuation">.</span>wheelSize <span class="token operator">||</span> <span class="token string">&apos;large&apos;</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> options<span class="token punctuation">.</span>color <span class="token operator">||</span> <span class="token string">&apos;blue&apos;</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>speed <span class="token operator">=</span> options<span class="token punctuation">.</span>speed <span class="token operator">||</span> <span class="token number">8</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// public features of vehicle , added to __proto__</span>
    <span class="token keyword">function</span> <span class="token function">_run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">+</span> <span class="token string">&apos; - run with: &apos;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>speed <span class="token operator">+</span> <span class="token string">&apos;km/s&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&apos;[object Number]&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>speed <span class="token operator">=</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">_withColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
          <span class="token string">&apos;The color of this &apos;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">+</span> <span class="token string">&apos; product is : &apos;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>color
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&apos;[object String]&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// provide a function to change other public features</span>
    <span class="token keyword">function</span> <span class="token function">_reform</span><span class="token punctuation">(</span><span class="token parameter">funcName<span class="token punctuation">,</span> newFunc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>
        <span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">[</span>funcName<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&apos;function&apos;</span> <span class="token operator">||</span>
        <span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>funcName<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&apos;function&apos;</span>
      <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">[</span>funcName<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>funcName<span class="token punctuation">]</span> <span class="token operator">=</span> newFunc<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// provide a function to add new public features</span>
    <span class="token keyword">function</span> <span class="token function">_addFeature</span><span class="token punctuation">(</span><span class="token parameter">funcName<span class="token punctuation">,</span> newFunc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">[</span>funcName<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&apos;undefined&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">[</span>funcName<span class="token punctuation">]</span> <span class="token operator">=</span> newFunc<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>funcName<span class="token punctuation">]</span> <span class="token operator">=</span> newFunc<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// private features, added to obj</span>

    <span class="token comment">// core: create method</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">create</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> vehicleClass <span class="token operator">=</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">,</span>
        newVehicle <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&apos;car&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        vehicleClass <span class="token operator">=</span> Car<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        vehicleClass <span class="token operator">=</span> Truck<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// create new vehicle with options, by pre-defined specific constructor</span>
      newVehicle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">vehicleClass</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// set up prototype</span>
      newVehicle<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> publicVehicle<span class="token punctuation">;</span>
      newVehicle<span class="token punctuation">.</span>prototype <span class="token operator">=</span> publicVehicle<span class="token punctuation">;</span>

      <span class="token comment">// add public feature</span>
      newVehicle<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>run <span class="token operator">=</span> _run<span class="token punctuation">;</span>
      newVehicle<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>withColor <span class="token operator">=</span> _withColor<span class="token punctuation">;</span>
      newVehicle<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>reform <span class="token operator">=</span> _reform<span class="token punctuation">;</span>
      newVehicle<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>addFeature <span class="token operator">=</span> _addFeature<span class="token punctuation">;</span>

      <span class="token comment">// add private(seperately) feature</span>

      <span class="token comment">// return new obj</span>
      <span class="token keyword">return</span> newVehicle<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// define more factory</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    vehicleFactory<span class="token operator">:</span> VehicleFactory
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="adapter-pattern"><a name="adapter-pattern" class="anchor-navigation-ex-anchor" href="#adapter-pattern"><i class="fa fa-link" aria-hidden="true"></i></a>3.14. Adapter Pattern</h3>
<p>&#x9002;&#x914D;&#x5668;&#x901A;&#x8FC7;&#x5185;&#x90E8;&#x4F7F;&#x7528;&#x65B0;&#x63A5;&#x53E3;&#x89C4;&#x5B9A;&#x7684;&#x5C5E;&#x6027;/&#x65B9;&#x6CD5;, &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5916;&#x89C2;&#x4E0E;&#x65E7;&#x63A5;&#x53E3;&#x4E00;&#x81F4; &#x7684;&#x65B9;&#x6CD5;</p>
<ul>
<li>old.method();</li>
<li>adapter.method(); // &#x5B9E;&#x73B0;&#x6B64; method &#x65F6;,&#x4F7F;&#x7528;&#x4E86;&#x65B0;&#x63A5;&#x53E3;&#x89C4;&#x5B9A;&#x7684;&#x5C5E;&#x6027;/&#x65B9;&#x6CD5;</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token comment">// old interface</span>
<span class="token keyword">function</span> <span class="token function">Shipping</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">request</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">zipStart<span class="token punctuation">,</span> zipEnd<span class="token punctuation">,</span> weight</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token keyword">return</span> <span class="token string">&apos;$49.75&apos;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// new interface</span>
<span class="token keyword">function</span> <span class="token function">AdvancedShipping</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">login</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">credentials</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">setStart</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">start</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">setDestination</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">destination</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">calculate</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">weight</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&apos;$39.50&apos;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// adapter interface</span>
<span class="token keyword">function</span> <span class="token function">AdapterShipping</span><span class="token punctuation">(</span><span class="token parameter">credentials</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> shipping <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AdvancedShipping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  shipping<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>credentials<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">request</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">zipStart<span class="token punctuation">,</span> zipEnd<span class="token punctuation">,</span> weight</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      shipping<span class="token punctuation">.</span><span class="token function">setStart</span><span class="token punctuation">(</span>zipStart<span class="token punctuation">)</span><span class="token punctuation">;</span>
      shipping<span class="token punctuation">.</span><span class="token function">setDestination</span><span class="token punctuation">(</span>zipEnd<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> shipping<span class="token punctuation">.</span><span class="token function">calculate</span><span class="token punctuation">(</span>weight<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> shipping <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Shipping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> adapterShipping <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AdapterShipping</span><span class="token punctuation">(</span>credentials<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// original shipping object and interface</span>
<span class="token keyword">var</span> cost <span class="token operator">=</span> shipping<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token string">&apos;78701&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;10010&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;2 lbs&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
log<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&apos;Old cost: &apos;</span> <span class="token operator">+</span> cost<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// new shipping object with adapted interface</span>
cost <span class="token operator">=</span> adapter<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token string">&apos;78701&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;10010&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;2 lbs&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="decorator-pattern"><a name="decorator-pattern" class="anchor-navigation-ex-anchor" href="#decorator-pattern"><i class="fa fa-link" aria-hidden="true"></i></a>3.15. Decorator Pattern</h3>
<ul>
<li>&#x91CD;&#x5199;/&#x91CD;&#x8F7D;/&#x6269;&#x5C55;&#x5BF9;&#x8C61;&#x539F;&#x6709;&#x7684;&#x884C;&#x4E3A;(method),&#x4F46;&#x4E0D;&#x6539;&#x53D8;&#x5BF9;&#x8C61;&#x539F;&#x6709;&#x5C5E;&#x6027;</li>
<li>&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x65B0;&#x5C5E;&#x6027;&#xFF0C;&#x5E76;&#x56F4;&#x7ED5;&#x65B0;&#x5C5E;&#x6027;&#x6269;&#x5C55;&#x5BF9;&#x8C61;&#x7684;&#x539F;&#x884C;&#x4E3A; e.g &#x539F;&#x5BF9;&#x8C61;&#x53EA;&#x4F1A;&#x8BF4;&#x4E2D;&#x6587;&#xFF0C;&#x88C5;&#x9970;&#x540E;&#x540C;&#x65F6;&#x8BF4;&#x4E2D;&#x6587;&#x4E0E;&#x82F1;&#x6587;</li>
<li>&#x907F;&#x514D;&#x4E86;&#x901A;&#x8FC7;&#x7EE7;&#x627F;&#x6765;&#x4E3A;&#x7C7B;&#x578B;&#x6DFB;&#x52A0;&#x65B0;&#x7684;&#x804C;&#x8D23;&#x7684;&#x5F62;&#x5F0F;&#x53EF;&#x53D6;&#xFF0C;&#x901A;&#x8FC7;&#x7EE7;&#x627F;&#x7684;&#x65B9;&#x5F0F;&#x5BB9;&#x6613;&#x9020;&#x6210;&#x5B50;&#x7C7B;&#x7684;&#x81A8;&#x80C0;</li>
<li>&#x4FDD;&#x6301;&#x63A5;&#x53E3;&#x7684;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x52A8;&#x6001;&#x6539;&#x53D8;&#x5BF9;&#x8C61;&#x7684;&#x5916;&#x89C2;/&#x804C;&#x8D23;</li>
<li>ConcreteDecorator &#x7C7B;: private ClassName component;(&#x62E5;&#x6709;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x5F15;&#x7528;)</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token function-variable function">__decorate</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">decorators<span class="token punctuation">,</span> target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> desc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> argumentsLength <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">let</span> descriptorOrTarget<span class="token punctuation">;</span>
  <span class="token keyword">let</span> decorator<span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>argumentsLength <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// class decorator</span>
    descriptorOrTarget <span class="token operator">=</span> target<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>desc <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// method decorator</span>
    descriptorOrTarget <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> decorators<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>decorator <span class="token operator">=</span> decorators<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>argumentsLength <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// if the decorator function returns a value use it;</span>
        <span class="token comment">// otherwise use the original.</span>
        descriptorOrTarget <span class="token operator">=</span>
          <span class="token function">decorator</span><span class="token punctuation">(</span>descriptorOrTarget<span class="token punctuation">)</span> <span class="token operator">||</span> descriptorOrTarget<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// if the decorator function returns a descriptor use it;</span>
        <span class="token comment">// otherwise use the original.</span>
        descriptorOrTarget <span class="token operator">=</span>
          <span class="token function">decorator</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> descriptorOrTarget<span class="token punctuation">)</span> <span class="token operator">||</span> descriptorOrTarget<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>argumentsLength <span class="token operator">&gt;</span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> descriptorOrTarget<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> descriptorOrTarget<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> descriptorOrTarget<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="&#x5B9E;&#x73B0;-1&#x5173;&#x952E;---&#x5B9E;&#x73B0;&#x4F20;&#x9012;&#x65B9;&#x5F0F;"><a name="&#x5B9E;&#x73B0;-1&#x5173;&#x952E;---&#x5B9E;&#x73B0;&#x4F20;&#x9012;&#x65B9;&#x5F0F;" class="anchor-navigation-ex-anchor" href="#&#x5B9E;&#x73B0;-1&#x5173;&#x952E;---&#x5B9E;&#x73B0;&#x4F20;&#x9012;&#x65B9;&#x5F0F;"><i class="fa fa-link" aria-hidden="true"></i></a><a name="&#x5B9E;&#x73B0;-1&#x5173;&#x952E;---&#x5B9E;&#x73B0;&#x4F20;&#x9012;&#x65B9;&#x5F0F;" class="plugin-anchor" href="#&#x5B9E;&#x73B0;-1&#x5173;&#x952E;---&#x5B9E;&#x73B0;&#x4F20;&#x9012;&#x65B9;&#x5F0F;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5B9E;&#x73B0; 1(&#x5173;&#x952E; - &#x5B9E;&#x73B0;&#x4F20;&#x9012;&#x65B9;&#x5F0F;)</h4>
<p>&#x4E24;&#x79CD;&#x65B9;&#x5F0F;:</p>
<ul>
<li>uber &#x5C5E;&#x6027;&#x83B7;&#x5F97;&#x6BCF;&#x6B21;&#x88C5;&#x9970;&#x540E;&#x7ED3;&#x679C;</li>
<li>&#x5FAA;&#x73AF;&#x53E0;&#x52A0;&#x6BCF;&#x6B21;&#x88C5;&#x9970;&#x540E;&#x7ED3;&#x679C;</li>
</ul>
<h4 id="return-thisuberfunction"><a name="return-thisuberfunction" class="anchor-navigation-ex-anchor" href="#return-thisuberfunction"><i class="fa fa-link" aria-hidden="true"></i></a><a name="return-thisuberfunction" class="plugin-anchor" href="#return-thisuberfunction"><i class="fa fa-link" aria-hidden="true"></i></a>return this.uber.function()</h4>
<pre class="language-"><code class="lang-javascript"><span class="token comment">// &#x6784;&#x9020;&#x51FD;&#x6570;</span>
<span class="token keyword">function</span> <span class="token function">Sale</span><span class="token punctuation">(</span><span class="token parameter">price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price <span class="token operator">||</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Sale</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getPrice</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>price<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// &#x5B9A;&#x4E49;&#x5177;&#x4F53;&#x88C5;&#x9970;&#x5668;</span>
<span class="token comment">// &#x901A;&#x8FC7;uber&#x5C5E;&#x6027;&#x83B7;&#x5F97;&#x4E0A;&#x4E00;&#x6B21;&#x88C5;&#x9970;&#x540E;&#x7684;&#x7ED3;&#x679C;</span>
Sale<span class="token punctuation">.</span>decorators <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Sale<span class="token punctuation">.</span>decorators<span class="token punctuation">.</span>fedtax <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">getPrice</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> price <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>uber<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    price <span class="token operator">+=</span> <span class="token punctuation">(</span>price <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> price<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Sale<span class="token punctuation">.</span>decorators<span class="token punctuation">.</span>quebec <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">getPrice</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> price <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>uber<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    price <span class="token operator">+=</span> <span class="token punctuation">(</span>price <span class="token operator">*</span> <span class="token number">7.5</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> price<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Sale<span class="token punctuation">.</span>decorators<span class="token punctuation">.</span>money <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">getPrice</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&apos;$&apos;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>uber<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Sale<span class="token punctuation">.</span>decorators<span class="token punctuation">.</span>cdn <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">getPrice</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&apos;CDN$ &apos;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>uber<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">Sale</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">decorate</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">decorator</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> <span class="token function-variable function">F</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    overrides <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>decorators<span class="token punctuation">[</span>decorator<span class="token punctuation">]</span><span class="token punctuation">,</span>
    i<span class="token punctuation">,</span>
    newobj<span class="token punctuation">;</span>

  <span class="token comment">// &#x4E34;&#x65F6;&#x4EE3;&#x7406;&#x6784;&#x9020;&#x51FD;&#x6570;</span>
  <span class="token class-name">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  newobj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// &#x4F20;&#x9012;&#x5B9E;&#x73B0;&#x7684;&#x5173;&#x952E;</span>
  <span class="token comment">// &#x901A;&#x8FC7;uber&#x5C5E;&#x6027;&#x83B7;&#x5F97;&#x4E0A;&#x4E00;&#x6B21;&#x88C5;&#x9970;&#x540E;&#x7684;&#x7ED3;&#x679C;</span>
  newobj<span class="token punctuation">.</span>uber <span class="token operator">=</span> <span class="token class-name">F</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> overrides<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>overrides<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      newobj<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> overrides<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> newobj<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="decorators-list"><a name="decorators-list" class="anchor-navigation-ex-anchor" href="#decorators-list"><i class="fa fa-link" aria-hidden="true"></i></a><a name="decorators-list" class="plugin-anchor" href="#decorators-list"><i class="fa fa-link" aria-hidden="true"></i></a>Decorators List</h4>
<pre class="language-"><code class="lang-javascript"><span class="token comment">// &#x6784;&#x9020;&#x51FD;&#x6570;</span>
<span class="token keyword">function</span> <span class="token function">Sale</span><span class="token punctuation">(</span><span class="token parameter">price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token number">100</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>decorators_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Sale</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getPrice</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>price<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// &#x5B9A;&#x4E49;&#x5177;&#x4F53;&#x88C5;&#x9970;&#x5668;</span>
Sale<span class="token punctuation">.</span>decorators <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Sale<span class="token punctuation">.</span>decorators<span class="token punctuation">.</span>fedtax <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">getPrice</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> price <span class="token operator">+</span> <span class="token punctuation">(</span>price <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Sale<span class="token punctuation">.</span>decorators<span class="token punctuation">.</span>quebec <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">getPrice</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> price <span class="token operator">+</span> <span class="token punctuation">(</span>price <span class="token operator">*</span> <span class="token number">7.5</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Sale<span class="token punctuation">.</span>decorators<span class="token punctuation">.</span>money <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">getPrice</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&apos;$&apos;</span> <span class="token operator">+</span> price<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">Sale</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">decorate</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">decorator</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>decorators_list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>decorator<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Sale</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getPrice</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> price <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>price<span class="token punctuation">,</span>
    i<span class="token punctuation">,</span>
    max <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>decorators_list<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
    name<span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> max<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>decorators_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// &#x4F20;&#x9012;&#x5B9E;&#x73B0;&#x7684;&#x5173;&#x952E;</span>
    <span class="token comment">// &#x901A;&#x8FC7;&#x5FAA;&#x73AF;&#x53E0;&#x52A0;&#x4E0A;&#x4E00;&#x6B21;&#x88C5;&#x9970;&#x540E;&#x7684;&#x7ED3;&#x679C;</span>
    price <span class="token operator">=</span> Sale<span class="token punctuation">.</span>decorators<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> price<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="&#x5B9E;&#x73B0;-2"><a name="&#x5B9E;&#x73B0;-2" class="anchor-navigation-ex-anchor" href="#&#x5B9E;&#x73B0;-2"><i class="fa fa-link" aria-hidden="true"></i></a><a name="&#x5B9E;&#x73B0;-2" class="plugin-anchor" href="#&#x5B9E;&#x73B0;-2"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5B9E;&#x73B0; 2</h4>
<pre class="language-"><code class="lang-js"><span class="token comment">// The constructor to decorate</span>
<span class="token keyword">function</span> <span class="token function">MacBook</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">cost</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">997</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">screenSize</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">11.6</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Decorator 1</span>
<span class="token keyword">function</span> <span class="token function">Memory</span><span class="token punctuation">(</span><span class="token parameter">macbook</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> v <span class="token operator">=</span> macbook<span class="token punctuation">.</span><span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  macbook<span class="token punctuation">.</span><span class="token function-variable function">cost</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> v <span class="token operator">+</span> <span class="token number">75</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Decorator 2</span>
<span class="token keyword">function</span> <span class="token function">Engraving</span><span class="token punctuation">(</span><span class="token parameter">macbook</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> v <span class="token operator">=</span> macbook<span class="token punctuation">.</span><span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  macbook<span class="token punctuation">.</span><span class="token function-variable function">cost</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> v <span class="token operator">+</span> <span class="token number">200</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Decorator 3</span>
<span class="token keyword">function</span> <span class="token function">Insurance</span><span class="token punctuation">(</span><span class="token parameter">macbook</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> v <span class="token operator">=</span> macbook<span class="token punctuation">.</span><span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  macbook<span class="token punctuation">.</span><span class="token function-variable function">cost</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> v <span class="token operator">+</span> <span class="token number">250</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> mb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MacBook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">Memory</span><span class="token punctuation">(</span>mb<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">Engraving</span><span class="token punctuation">(</span>mb<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">Insurance</span><span class="token punctuation">(</span>mb<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Outputs: 1522</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mb<span class="token punctuation">.</span><span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Outputs: 11.6</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mb<span class="token punctuation">.</span><span class="token function">screenSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="facade-pattern"><a name="facade-pattern" class="anchor-navigation-ex-anchor" href="#facade-pattern"><i class="fa fa-link" aria-hidden="true"></i></a>3.16. Facade Pattern</h3>
<p>&#x5C06;&#x591A;&#x4E2A;&#x590D;&#x6742;&#x7684;&#x5B50;&#x7CFB;&#x7EDF;&#x5C01;&#x88C5;+&#x5408;&#x5E76;&#xFF0C;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x590D;&#x6742;&#x529F;&#x80FD;&#xFF0C;&#x4F46;&#x53EA;&#x66B4;&#x9732;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x63A5;&#x53E3; - &#x5C01;&#x88C5;&#x590D;&#x6742;&#x903B;&#x8F91;</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> sabertazimi <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

sabertazimi<span class="token punctuation">.</span><span class="token function-variable function">addMyEvent</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> ev<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>ev<span class="token punctuation">,</span> fn<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>attachEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    el<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">&apos;on&apos;</span> <span class="token operator">+</span> ev<span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    el<span class="token punctuation">[</span><span class="token string">&apos;on&apos;</span> <span class="token operator">+</span> ev<span class="token punctuation">]</span> <span class="token operator">=</span> fn<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="flyweight-pattern"><a name="flyweight-pattern" class="anchor-navigation-ex-anchor" href="#flyweight-pattern"><i class="fa fa-link" aria-hidden="true"></i></a>3.17. Flyweight Pattern</h3>
<p>&#x51CF;&#x5C0F;&#x5185;&#x5B58;&#x5F00;&#x9500;:</p>
<ul>
<li>&#x5185;&#x5728;&#x4FE1;&#x606F; - &#x5BF9;&#x8C61;&#x4E2D;&#x7684;&#x5185;&#x90E8;&#x65B9;&#x6CD5;&#x6240;&#x9700;&#x4FE1;&#x606F;/&#x5C5E;&#x6027;, &#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x4EAB;&#x5143;&#x53EF;&#x66FF;&#x4EE3;&#x5927;&#x91CF;&#x5177;&#x6709;&#x76F8;&#x540C;&#x5185;&#x5728;&#x4FE1;&#x606F;&#x7684;&#x5BF9;&#x8C61;</li>
<li>&#x5916;&#x90E8;&#x72B6;&#x6001;&#x4F5C;&#x4E3A;&#x65B9;&#x6CD5;&#x53C2;&#x6570;:&#x4F7F;&#x4E4B;&#x9002;&#x5E94;&#x4E0D;&#x540C;&#x7684;&#x5916;&#x90E8;&#x72B6;&#x6001;(context)&#x2014;&#x2014;&#x5BF9;&#x8C61;&#x5B9E;&#x4F8B;&#x5DEE;&#x5F02;&#x5904;</li>
<li>&#x67D0;&#x4E2A;&#x7C7B;&#x578B;&#x7684;&#x5BF9;&#x8C61;&#x6709;&#x5927;&#x91CF;&#x7684;&#x5B9E;&#x4F8B;&#xFF0C;&#x5BF9;&#x8FD9;&#x4E9B;&#x5B9E;&#x4F8B;&#x8FDB;&#x884C;&#x5206;&#x7C7B;&#xFF0C;&#x5408;&#x5E76;&#x76F8;&#x540C;&#x5206;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x53EA;&#x521B;&#x5EFA;&#x5C11;&#x91CF;&#x5B9E;&#x4F8B;(&#x4EAB;&#x5143;)</li>
<li>&#x901A;&#x8FC7;&#x4EAB;&#x5143;&#x5DE5;&#x5382;&#x6765;&#x7BA1;&#x7406;&#x4E00;&#x7EC4;&#x4EAB;&#x5143;&#xFF0C;&#x5F53;&#x6240;&#x9700;&#x4EAB;&#x5143;&#x5DF2;&#x5B58;&#x5728;&#x65F6;&#xFF0C;&#x8FD4;&#x56DE;&#x5DF2;&#x5B58;&#x5728;&#x4EAB;&#x5143;;&#x5F53;&#x6240;&#x9700;&#x4EAB;&#x5143;&#x4E0D;&#x5B58;&#x5728;&#x65F6;&#xFF0C;&#x521B;&#x5EFA;&#x65B0;&#x4EAB;&#x5143;</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">Flyweight</span><span class="token punctuation">(</span><span class="token parameter">make<span class="token punctuation">,</span> model<span class="token punctuation">,</span> processor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>make <span class="token operator">=</span> make<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>model <span class="token operator">=</span> model<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>processor <span class="token operator">=</span> processor<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> FlyWeightFactory <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> flyweights <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">make<span class="token punctuation">,</span> model<span class="token punctuation">,</span> processor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// &#x4E0D;&#x5B58;&#x5728;&#x6240;&#x9700;&#x4EAB;&#x5143;&#xFF0C;&#x65B0;&#x5EFA;&#x65B0;&#x4EAB;&#x5143;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>flyweights<span class="token punctuation">[</span>make <span class="token operator">+</span> model<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        flyweights<span class="token punctuation">[</span>make <span class="token operator">+</span> model<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Flyweight</span><span class="token punctuation">(</span>make<span class="token punctuation">,</span> model<span class="token punctuation">,</span> processor<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">return</span> flyweights<span class="token punctuation">[</span>make <span class="token operator">+</span> model<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function-variable function">getCount</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> f <span class="token keyword">in</span> flyweights<span class="token punctuation">)</span> count<span class="token operator">++</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> count<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">Computer</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">make<span class="token punctuation">,</span> model<span class="token punctuation">,</span> processor<span class="token punctuation">,</span> memory<span class="token punctuation">,</span> tag</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>flyweight <span class="token operator">=</span> FlyWeightFactory<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>make<span class="token punctuation">,</span> model<span class="token punctuation">,</span> processor<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>memory <span class="token operator">=</span> memory<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>tag <span class="token operator">=</span> tag<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getMake</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>flyweight<span class="token punctuation">.</span>make<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">ComputerCollection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> computers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">make<span class="token punctuation">,</span> model<span class="token punctuation">,</span> processor<span class="token punctuation">,</span> memory<span class="token punctuation">,</span> tag</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      computers<span class="token punctuation">[</span>tag<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span>make<span class="token punctuation">,</span> model<span class="token punctuation">,</span> processor<span class="token punctuation">,</span> memory<span class="token punctuation">,</span> tag<span class="token punctuation">)</span><span class="token punctuation">;</span>
      count<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">tag</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> computers<span class="token punctuation">[</span>tag<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function-variable function">getCount</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> count<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> computers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComputerCollection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  computers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&apos;Dell&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;Studio XPS&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;Intel&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;5G&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;Y755P&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  computers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&apos;Dell&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;Studio XPS&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;Intel&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;6G&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;X997T&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  computers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&apos;Dell&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;Studio XPS&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;Intel&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;2G&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;NT777&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  computers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&apos;Dell&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;Studio XPS&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;Intel&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;2G&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;0J88A&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  computers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&apos;HP&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;Envy&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;Intel&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;4G&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;CNU883701&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  computers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&apos;HP&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;Envy&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;Intel&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;2G&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;TXU003283&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;Computers: &apos;</span> <span class="token operator">+</span> computers<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;Flyweights: &apos;</span> <span class="token operator">+</span> FlyWeightFactory<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="proxy-pattern"><a name="proxy-pattern" class="anchor-navigation-ex-anchor" href="#proxy-pattern"><i class="fa fa-link" aria-hidden="true"></i></a>3.18. Proxy Pattern</h3>
<p>&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#xFF0C;&#x4E34;&#x65F6;&#x5B58;&#x50A8;&#x539F;&#x5BF9;&#x8C61;&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x4EA7;&#x751F;&#x7684;&#x4E00;&#x7CFB;&#x5217;&#x7ED3;&#x679C;(&#x65B0;&#x5EFA;&#x5BF9;&#x8C61;),&#x51CF;&#x5C11;&#x91CD;&#x590D;&#x5BF9;&#x8C61;&#x7684;&#x4EA7;&#x751F;</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">GeoCoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getLatLng</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">address</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>address <span class="token operator">===</span> <span class="token string">&apos;Amsterdam&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">&apos;52.3700&#xB0; N, 4.8900&#xB0; E&apos;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>address <span class="token operator">===</span> <span class="token string">&apos;London&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">&apos;51.5171&#xB0; N, 0.1062&#xB0; W&apos;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>address <span class="token operator">===</span> <span class="token string">&apos;Paris&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">&apos;48.8742&#xB0; N, 2.3470&#xB0; E&apos;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>address <span class="token operator">===</span> <span class="token string">&apos;Berlin&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">&apos;52.5233&#xB0; N, 13.4127&#xB0; E&apos;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">GeoProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> geocoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GeoCoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> geocache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">getLatLng</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">address</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>geocache<span class="token punctuation">[</span>address<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        geocache<span class="token punctuation">[</span>address<span class="token punctuation">]</span> <span class="token operator">=</span> geocoder<span class="token punctuation">.</span><span class="token function">getLatLng</span><span class="token punctuation">(</span>address<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      log<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>address <span class="token operator">+</span> <span class="token string">&apos;: &apos;</span> <span class="token operator">+</span> geocache<span class="token punctuation">[</span>address<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> geocache<span class="token punctuation">[</span>address<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getCount</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> code <span class="token keyword">in</span> geocache<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        count<span class="token operator">++</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> count<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="command-pattern"><a name="command-pattern" class="anchor-navigation-ex-anchor" href="#command-pattern"><i class="fa fa-link" aria-hidden="true"></i></a>3.19. Command Pattern</h3>
<p>&#x6709;&#x65F6;&#x5019;&#x9700;&#x8981;&#x5411;&#x67D0;&#x4E9B;&#x5BF9;&#x8C61;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#xFF0C;&#x4F46;&#x662F;&#x5E76;&#x4E0D;&#x77E5;&#x9053;&#x8BF7;&#x6C42;&#x7684;&#x63A5;&#x6536;&#x8005;&#x662F;&#x8C01; (&#x591A;&#x4E2A;&#x5BF9;&#x8C61;&#x4E2D;&#x7684;&#x67D0;&#x4E2A;&#x968F;&#x673A;&#x5BF9;&#x8C61;)&#xFF0C;&#x4E5F;&#x4E0D;&#x77E5;&#x9053;&#x88AB;&#x8BF7;&#x6C42;&#x7684;&#x64CD;&#x4F5C;&#x662F;&#x4EC0;&#x4E48;.
&#x6B64;&#x65F6;&#x5E0C;&#x671B;&#x7528;&#x4E00;&#x79CD;&#x677E;&#x8026;&#x5408;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x8BBE;&#x8BA1;&#x7A0B;&#x5E8F;&#xFF0C;&#x4F7F;&#x5F97;&#x8BF7;&#x6C42;&#x53D1;&#x9001;&#x8005;&#x548C;&#x8BF7;&#x6C42;&#x63A5;&#x6536;&#x8005;&#x80FD;&#x591F;&#x6D88;&#x9664;&#x5F7C;&#x6B64;&#x7684;&#x8026;&#x5408;&#x5173;&#x7CFB;</p>
<ul>
<li>&#x5C06;&#x65B9;&#x6CD5;/&#x52A8;&#x4F5C;&#x5C01;&#x88C5;&#x6210;&#x5BF9;&#x8C61;, &#x4F7F;&#x5F97;&#x5916;&#x90E8;&#x901A;&#x8FC7;&#x552F;&#x4E00;&#x65B9;&#x6CD5; excute/run &#x8C03;&#x7528;&#x5185;&#x90E8;&#x65B9;&#x6CD5;/&#x52A8;&#x4F5C;</li>
<li>&#x5BA2;&#x6237;&#x521B;&#x5EFA;&#x547D;&#x4EE4;&#xFF1B;&#x8C03;&#x7528;&#x8005;&#x6267;&#x884C;&#x8BE5;&#x547D;&#x4EE4;&#xFF1B;&#x63A5;&#x6536;&#x8005;&#x5728;&#x547D;&#x4EE4;&#x6267;&#x884C;&#x65F6;&#x6267;&#x884C;&#x76F8;&#x5E94;&#x64CD;&#x4F5C;</li>
<li>&#x5BA2;&#x6237;&#x901A;&#x5E38;&#x88AB;&#x5305;&#x88C5;&#x4E3A;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x4E0D;&#x662F;&#x5FC5;&#x7136;&#x7684;</li>
<li>&#x8C03;&#x7528;&#x8005;&#x63A5;&#x8FC7;&#x547D;&#x4EE4;&#x5E76;&#x5C06;&#x5176;&#x4FDD;&#x5B58;&#x4E0B;&#x6765;, &#x5B83;&#x4F1A;&#x5728;&#x67D0;&#x4E2A;&#x65F6;&#x5019;&#x8C03;&#x7528;&#x8BE5;&#x547D;&#x4EE4;&#x5BF9;&#x8C61;&#x7684; execute &#x65B9;&#x6CD5;</li>
<li>&#x8C03;&#x7528;&#x8005;&#x8FDB;&#x884C; <code>commandObject.execute</code> &#x8FD9;&#x79CD;&#x8C03;&#x7528;&#x65F6;&#xFF0C;
&#x5B83;&#x6240;&#x8C03;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#x5C06;&#x8F6C;&#x800C;&#x4EE5; <code>receiver.action()</code> &#x8FD9;&#x79CD;&#x5F62;&#x5F0F;&#x8C03;&#x7528;&#x6070;&#x5F53;&#x7684;&#x65B9;&#x6CD5;</li>
</ul>
<p>client and receiver</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token function-variable function">SimpleCommand</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">receving</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>receiving <span class="token operator">=</span> receving<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">SimpleCommand</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">execute</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>receiving<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<pre class="language-"><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> manager <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// command to be encapsulted</span>
  manager<span class="token punctuation">.</span><span class="token function-variable function">isNull</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nu</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>nu<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&apos;[object Null]&apos;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  manager<span class="token punctuation">.</span><span class="token function-variable function">isArray</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&apos;[object Array]&apos;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  manager<span class="token punctuation">.</span><span class="token function-variable function">isString</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&apos;[object String]&apos;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// public api</span>
  <span class="token keyword">function</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token parameter">command</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      manager<span class="token punctuation">[</span>command<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span>
      manager<span class="token punctuation">[</span>command<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>manager<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token parameter">command</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      manager<span class="token punctuation">[</span>command<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span>
      manager<span class="token punctuation">[</span>command<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>manager<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    execute<span class="token operator">:</span> execute<span class="token punctuation">,</span>
    run<span class="token operator">:</span> run
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>command pattern in UI development, bind command to UI components:</p>
<ul>
<li>executor: UI components</li>
<li>client and receiver: background tasks or other UI components</li>
<li>executor -&gt; client: command.execute() -&gt; receiver: receiver.action()</li>
</ul>
<p>e.g click <code>button</code> -&gt; refresh <code>menu</code></p>
<pre class="language-"><code class="lang-js"><span class="token comment">// receiver</span>
<span class="token keyword">const</span> MenuBar <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;refresh menu pages&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// client: command object</span>
<span class="token comment">// command: object with `action` implemented</span>
<span class="token keyword">const</span> <span class="token function-variable function">Command</span> <span class="token operator">=</span> <span class="token parameter">receiver</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    receiver<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> RefreshMenuBarCommand <span class="token operator">=</span> <span class="token function">Command</span><span class="token punctuation">(</span>MenuBar<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// executor</span>
button<span class="token punctuation">.</span><span class="token function-variable function">setCommand</span> <span class="token operator">=</span> <span class="token parameter">command</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  button<span class="token punctuation">.</span>command <span class="token operator">=</span> command<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
button<span class="token punctuation">.</span><span class="token function">setCommand</span><span class="token punctuation">(</span>RefreshMenuBarCommand<span class="token punctuation">)</span><span class="token punctuation">;</span>

button<span class="token punctuation">.</span><span class="token function">addEventLister</span><span class="token punctuation">(</span><span class="token string">&apos;click&apos;</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  button<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token function-variable function">MenuCommand</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>action <span class="token operator">=</span> action<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">MenuCommand</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">execute</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> fileActions <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileActions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> EditActions <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EditActions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> InsertActions <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InsertActions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HelpActions <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HelpActions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> appMenuBar <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MenuBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//-----------</span>
<span class="token keyword">const</span> fileMenu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token string">&apos;File&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> openCommand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MenuCommand</span><span class="token punctuation">(</span>fileActions<span class="token punctuation">.</span>open<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> closeCommand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MenuCommand</span><span class="token punctuation">(</span>fileActions<span class="token punctuation">.</span>close<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> saveCommand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MenuCommand</span><span class="token punctuation">(</span>fileActions<span class="token punctuation">.</span>save<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> saveAsCommand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MenuCommand</span><span class="token punctuation">(</span>fileActions<span class="token punctuation">.</span>saveAs<span class="token punctuation">)</span><span class="token punctuation">;</span>

fileMenu<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MenuItem</span><span class="token punctuation">(</span><span class="token string">&apos;open&apos;</span><span class="token punctuation">,</span> openCommand<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fileMenu<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MenuItem</span><span class="token punctuation">(</span><span class="token string">&apos;Close&apos;</span><span class="token punctuation">,</span> closeCommand<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fileMenu<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MenuItem</span><span class="token punctuation">(</span><span class="token string">&apos;Save&apos;</span><span class="token punctuation">,</span> saveCommand<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fileMenu<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MenuItem</span><span class="token punctuation">(</span><span class="token string">&apos;Close&apos;</span><span class="token punctuation">,</span> saveAsCommand<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

appMenuBar<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>fileMenu<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//--------------</span>
<span class="token keyword">const</span> editMenu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token string">&apos;Edit&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> cutCommand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MenuCommand</span><span class="token punctuation">(</span>EditActions<span class="token punctuation">.</span>cut<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> copyCommand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MenuCommand</span><span class="token punctuation">(</span>EditActions<span class="token punctuation">.</span>copy<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> pasteCommand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MenuCommand</span><span class="token punctuation">(</span>EditActions<span class="token punctuation">.</span>paste<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> deleteCommand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MenuCommand</span><span class="token punctuation">(</span>EditActions<span class="token punctuation">.</span>delete<span class="token punctuation">)</span><span class="token punctuation">;</span>

editMenu<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MenuItem</span><span class="token punctuation">(</span><span class="token string">&apos;Cut&apos;</span><span class="token punctuation">,</span> cutCommand<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
editMenu<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MenuItem</span><span class="token punctuation">(</span><span class="token string">&apos;Copy&apos;</span><span class="token punctuation">,</span> copyCommand<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
editMenu<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MenuItem</span><span class="token punctuation">(</span><span class="token string">&apos;Paste&apos;</span><span class="token punctuation">,</span> pasteCommand<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
editMenu<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MenuItem</span><span class="token punctuation">(</span><span class="token string">&apos;Delete&apos;</span><span class="token punctuation">,</span> deleteCommand<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

appMenuBar<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>editMenu<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//------------</span>
<span class="token keyword">const</span> insertMenu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token string">&apos;Insert&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> textBlockCommand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MenuCommand</span><span class="token punctuation">(</span>InsertACtions<span class="token punctuation">.</span>textBlock<span class="token punctuation">)</span><span class="token punctuation">;</span>
insertMenu<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MenuItem</span><span class="token punctuation">(</span><span class="token string">&apos;Text  Block&apos;</span><span class="token punctuation">,</span> textBlockCommand<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
appMenuBar<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>insertMenu<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//------------</span>
<span class="token keyword">const</span> helpMenu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token string">&apos;Help&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> showHelpCommand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MenuCommand</span><span class="token punctuation">(</span>HelpActions<span class="token punctuation">.</span><span class="token function">showHelp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
helpMenu<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MenuItem</span><span class="token punctuation">(</span><span class="token string">&apos;Show Help&apos;</span><span class="token punctuation">,</span> showHelpCommand<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
appMenuBar<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>helpMenu<span class="token punctuation">)</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&apos;body&apos;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>appMenuBar<span class="token punctuation">.</span><span class="token function">getElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
appMenuBar<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Command sequences to implement Macro/Batch/Undo command:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token function-variable function">Cursor</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> parent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> width<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> height<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>commandStack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&apos;canvas&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>height<span class="token punctuation">;</span>
  parent<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>ctx <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&apos;2d&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&apos;#CCC000&apos;</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">Cursor</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">move</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>commandStack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      _this<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">lineTo</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">+=</span> x<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">+=</span> y<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>position<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>position<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">executeCommands</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>position<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>position<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>commandStack<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>commandStack<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">undo</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>commandStack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">executeCommands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="mediator-pattern"><a name="mediator-pattern" class="anchor-navigation-ex-anchor" href="#mediator-pattern"><i class="fa fa-link" aria-hidden="true"></i></a>3.20. Mediator Pattern</h3>
<p>&#x4E00;&#x4E2A; Mediator &#x5BF9;&#x8C61;&#x5C01;&#x88C5;&#x5BF9;&#x8C61;&#x95F4;&#x7684;&#x534F;&#x8BAE;:
&#x4E2D;&#x592E;&#x96C6;&#x6743;&#x7684;&#x63A7;&#x5236;&#x4E2D;&#x5FC3; - &#x6240;&#x6709;&#x89C2;&#x5BDF;&#x8005;&#x5171;&#x4EAB;&#x4E00;&#x4E2A;&#x5171;&#x6709;&#x7684;&#x88AB;&#x89C2;&#x5BDF;&#x8005;(&#x6240;&#x6709;&#x8BA2;&#x9605;&#x8005;&#x8BA2;&#x9605;&#x540C;&#x4E00;&#x4E2A;&#x8282;&#x70B9;).</p>
<h3 id="observer-pattern"><a name="observer-pattern" class="anchor-navigation-ex-anchor" href="#observer-pattern"><i class="fa fa-link" aria-hidden="true"></i></a>3.21. Observer Pattern</h3>
<ul>
<li>&#x88AB;&#x89C2;&#x5BDF;&#x8005;(Subject)&#x7EF4;&#x62A4;&#x4E00;&#x7EC4;&#x89C2;&#x5BDF;&#x8005;&#x5217;&#x8868;&#xFF0C;&#x6BCF;&#x5F53;&#x88AB;&#x89C2;&#x5BDF;&#x8005;&#x72B6;&#x6001;&#x6539;&#x53D8;&#x65F6;&#xFF0C;&#x8C03;&#x7528; notify &#x51FD;&#x6570;&#xFF0C;&#x6B64;&#x51FD;&#x6570;&#x4E2D;&#x8C03;&#x7528;&#x89C2;&#x5BDF;&#x8005;(Observer)&#x7684; update &#x51FD;&#x6570;(&#x53EF;&#x81EA;&#x5B9A;&#x4E49;)</li>
<li>decouple subject and observer: each depends on <code>Abstraction</code> not <code>Implementation</code></li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">ObserverList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>observerList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">ObserverList</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">Add</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>observerList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">ObserverList</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">Empty</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>observerList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">ObserverList</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">Count</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>observerList<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">ObserverList</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">Get</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> index <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>observerList<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>observerList<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">ObserverList</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">Insert</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> pointer <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>observerList<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    pointer <span class="token operator">=</span> index<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>observerList<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>observerList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    pointer <span class="token operator">=</span> index<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> pointer<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">ObserverList</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">IndexOf</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> startIndex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> i <span class="token operator">=</span> startIndex<span class="token punctuation">,</span>
    pointer <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>

  <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>observerList<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>observerList<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      pointer <span class="token operator">=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    i<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> pointer<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">ObserverList</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">RemoveAt</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>observerList<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>observerList<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>observerList<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//  &#x88AB;&#x89C2;&#x5BDF;&#x8005;&#x7EF4;&#x62A4;&#x4E00;&#x4E2A;&#x89C2;&#x5BDF;&#x8005;&#x5217;&#x8868;</span>
<span class="token keyword">function</span> <span class="token function">Subject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>observers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObserverList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Subject</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">AddObserver</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">observer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">Subject</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">RemoveObserver</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">observer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">RemoveAt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">IndexOf</span><span class="token punctuation">(</span>observer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">Subject</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">Notify</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> observerCount <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">Count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> observerCount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// The Observer</span>
<span class="token keyword">function</span> <span class="token function">Observer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">Update</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Extend an object with an extension</span>
<span class="token keyword">function</span> <span class="token function">extend</span><span class="token punctuation">(</span><span class="token parameter">extension<span class="token punctuation">,</span> obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> extension<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> extension<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="pub-sub-pattern"><a name="pub-sub-pattern" class="anchor-navigation-ex-anchor" href="#pub-sub-pattern"><i class="fa fa-link" aria-hidden="true"></i></a>3.22. Pub-Sub Pattern</h3>
<ul>
<li>&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;&#x4E2D;&#x4E3B;&#x4F53;&#x548C;&#x89C2;&#x5BDF;&#x8005;&#x662F;&#x4E92;&#x76F8;&#x611F;&#x77E5;</li>
<li>&#x53D1;&#x5E03;-&#x8BA2;&#x9605;&#x6A21;&#x5F0F;&#x662F;&#x501F;&#x52A9;&#x7B2C;&#x4E09;&#x65B9;&#x6765;&#x5B9E;&#x73B0;&#x8C03;&#x5EA6;, &#x53D1;&#x5E03;&#x8005;&#x548C;&#x8BA2;&#x9605;&#x8005;&#x4E4B;&#x95F4;&#x4E92;&#x4E0D;&#x611F;&#x77E5;</li>
</ul>
<h4 id="implementation"><a name="implementation" class="anchor-navigation-ex-anchor" href="#implementation"><i class="fa fa-link" aria-hidden="true"></i></a><a name="implementation" class="plugin-anchor" href="#implementation"><i class="fa fa-link" aria-hidden="true"></i></a>Implementation</h4>
<ul>
<li>pubsubz.js</li>
</ul>
<pre class="language-"><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">window<span class="token punctuation">,</span> doc<span class="token punctuation">,</span> undef</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> pubsubz <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> topics <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    subUid <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>

  pubsubz<span class="token punctuation">.</span><span class="token function-variable function">publish</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">topic<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// undefined check</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>topics<span class="token punctuation">[</span>topic<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> subscribers <span class="token operator">=</span> topics<span class="token punctuation">[</span>topic<span class="token punctuation">]</span><span class="token punctuation">,</span>
        len <span class="token operator">=</span> subscribers <span class="token operator">?</span> subscribers<span class="token punctuation">.</span>length <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>

      <span class="token keyword">while</span> <span class="token punctuation">(</span>len<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        subscribers<span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span>topic<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  pubsubz<span class="token punctuation">.</span><span class="token function-variable function">subscribe</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">topic<span class="token punctuation">,</span> func</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// undefined check</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>topics<span class="token punctuation">[</span>topic<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      topics<span class="token punctuation">[</span>topic<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// add observer to observerlist(topics)</span>
    <span class="token keyword">var</span> token <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">++</span>subUid<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    topics<span class="token punctuation">[</span>topic<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      token<span class="token operator">:</span> token<span class="token punctuation">,</span>
      func<span class="token operator">:</span> func
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> token<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  pubsubz<span class="token punctuation">.</span><span class="token function-variable function">unsubscribe</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">token</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> m <span class="token keyword">in</span> topics<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>topics<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> j <span class="token operator">=</span> topics<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> j<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>topics<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>token <span class="token operator">===</span> token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            topics<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> token<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> pubsubz<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>document<span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li>test.js</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> pubsub <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./pubsubz.js&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// add observer to observerlist</span>
<span class="token keyword">var</span> testFirstSub <span class="token operator">=</span> pubsub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">&apos;login&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">topic<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>topic <span class="token operator">+</span> <span class="token string">&apos;: &apos;</span> <span class="token operator">+</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// subject broadcast/notify, observer update</span>
pubsub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">&apos;login&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;hello world!&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pubsub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">&apos;login&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&apos;test&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;a&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;b&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;c&apos;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pubsub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">&apos;login&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> color<span class="token operator">:</span> <span class="token string">&apos;blue&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token string">&apos;hello&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  pubsub<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span>testFirstSub<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// permanent subscribe</span>
pubsub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">&apos;sum&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">topic<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">&apos;[object Array]&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;Please input array: * &apos;</span> <span class="token operator">+</span> data <span class="token operator">+</span> <span class="token string">&apos; * is not array!&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> tmp <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&apos;[object Number]&apos;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>tmp<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> sum <span class="token operator">=</span> tmp<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">previous<span class="token punctuation">,</span> current</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> previous <span class="token operator">+</span> current<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;sumof &apos;</span> <span class="token operator">+</span> data <span class="token operator">+</span> <span class="token string">&apos; : &apos;</span> <span class="token operator">+</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
        <span class="token string">&apos;Please input number array: * &apos;</span> <span class="token operator">+</span> data <span class="token operator">+</span> <span class="token string">&apos; * is not number array!&apos;</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

pubsub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">&apos;login&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;hello again!&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pubsub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">&apos;sum&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;hello again!&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pubsub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">&apos;sum&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pubsub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">&apos;sum&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&apos;a&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;b&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;c&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;d&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;e&apos;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li>in jQuery</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token comment">// Equivalent to subscribe(topicName, callback)</span>
<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&apos;topicName&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//..perform some behaviour</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Equivalent to publish(topicName)</span>
<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">&apos;topicName&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Equivalent to unsubscribe(topicName)</span>
<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">&apos;topicName&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li>MicroEvent.js</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token comment">/**
 * MicroEvent - to make any js object an event emitter (server or browser)
 *
 * - pure javascript - server compatible, browser compatible
 * - dont rely on the browser doms
 * - super simple - you get it immediatly, no mistery, no magic involved
 *
 * - create a MicroEventDebug with goodies to debug
 *   - make it safer to use
 */</span>

<span class="token keyword">var</span> <span class="token function-variable function">MicroEvent</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">MicroEvent</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">bind</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> fct</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_events <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_events <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_events<span class="token punctuation">[</span>event<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_events<span class="token punctuation">[</span>event<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_events<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fct<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">unbind</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> fct</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_events <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_events <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>event <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_events <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_events<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_events<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>fct<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">trigger</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event <span class="token comment">/* , args... */</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_events <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_events <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>event <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_events <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_events<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>_events<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>
        <span class="token keyword">this</span><span class="token punctuation">,</span>
        <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * mixin will delegate all MicroEvent.js function in the destination object
 *
 * - require(&apos;MicroEvent&apos;).mixin(Foobar) will make Foobar able to use MicroEvent
 *
 * @param {Object} the object which will support MicroEvent
 */</span>
MicroEvent<span class="token punctuation">.</span><span class="token function-variable function">mixin</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">destObject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> props <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&apos;bind&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;unbind&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;trigger&apos;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> props<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> destObject <span class="token operator">===</span> <span class="token string">&apos;function&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      destObject<span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>props<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">MicroEvent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>props<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      destObject<span class="token punctuation">[</span>props<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">MicroEvent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>props<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> destObject<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// export in common js</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> module <span class="token operator">!==</span> <span class="token string">&apos;undefined&apos;</span> <span class="token operator">&amp;&amp;</span> <span class="token string">&apos;exports&apos;</span> <span class="token keyword">in</span> module<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> MicroEvent<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="sample"><a name="sample" class="anchor-navigation-ex-anchor" href="#sample"><i class="fa fa-link" aria-hidden="true"></i></a><a name="sample" class="plugin-anchor" href="#sample"><i class="fa fa-link" aria-hidden="true"></i></a>Sample</h4>
<h5 id="ajax-callback"><a name="ajax-callback" class="anchor-navigation-ex-anchor" href="#ajax-callback"><i class="fa fa-link" aria-hidden="true"></i></a><a name="ajax-callback" class="plugin-anchor" href="#ajax-callback"><i class="fa fa-link" aria-hidden="true"></i></a>Ajax Callback</h5>
<ul>
<li>&#x5F53;&#x8BF7;&#x6C42;&#x8FD4;&#x56DE;&#xFF0C;&#x5E76;&#x4E14;&#x5B9E;&#x9645;&#x7684;&#x6570;&#x636E;&#x53EF;&#x7528;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x901A;&#x77E5;</li>
<li>&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x4E8B;&#x4EF6;&#xFF08;&#x6216;&#x8005;&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x636E;&#xFF09;&#xFF0C;&#x90FD;&#x662F;&#x7531;&#x8BA2;&#x9605;&#x8005;&#x81EA;&#x5DF1;&#x51B3;&#x5B9A;&#x7684;</li>
<li>&#x53EF;&#x4EE5;&#x6709;&#x591A;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x8BA2;&#x9605;&#x8005;&#xFF0C;&#x4EE5;&#x4E0D;&#x540C;&#x7684;&#x65B9;&#x5F0F;&#x4F7F;&#x7528;&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x636E;</li>
<li>Ajax &#x5C42;: &#x552F;&#x4E00;&#x7684;&#x8D23;&#x4EFB; - &#x8BF7;&#x6C42;&#x548C;&#x8FD4;&#x56DE;&#x6570;&#x636E;&#xFF0C;&#x63A5;&#x7740;&#x5C06;&#x6570;&#x636E;&#x53D1;&#x9001;&#x7ED9;&#x6240;&#x6709;&#x60F3;&#x8981;&#x4F7F;&#x7528;&#x6570;&#x636E;&#x7684;&#x5730;&#x65B9;</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">$</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

   <span class="token comment">// Pre-compile template and &quot;cache&quot; it using closure</span>
   <span class="token keyword">var</span> resultTemplate <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">template</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span> <span class="token string">&quot;#resultTemplate&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">// Subscribe to the new search tags topic</span>
   $<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span> <span class="token string">&quot;/search/tags&quot;</span> <span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">tags</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token function">$</span><span class="token punctuation">(</span> <span class="token string">&quot;#searchResults&quot;</span> <span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>&quot;


  Searched <span class="token keyword">for</span><span class="token operator">:</span><span class="token string">&quot; + tags + &quot;</span>

&quot;<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">// Subscribe to the new results topic</span>
   $<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span> <span class="token string">&quot;/search/resultSet&quot;</span> <span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">results</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>

       <span class="token function">$</span><span class="token punctuation">(</span> <span class="token string">&quot;#searchResults&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">resultTemplate</span><span class="token punctuation">(</span> results <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">// Submit a search query and publish tags on the /search/tags topic</span>
   <span class="token function">$</span><span class="token punctuation">(</span> <span class="token string">&quot;#flickrSearch&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">e</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>

       e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">var</span> tags <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span> <span class="token string">&quot;#query&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>tags <span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>

       $<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span> <span class="token string">&quot;/search/tags&quot;</span> <span class="token punctuation">,</span> <span class="token punctuation">[</span> $<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span>tags<span class="token punctuation">)</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


   <span class="token comment">// Subscribe to new tags being published and perform</span>
   <span class="token comment">// a search query using them. Once data has returned</span>
   <span class="token comment">// publish this data for the rest of the application</span>
   <span class="token comment">// to consume</span>

   $<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">&quot;/search/tags&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">tags</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment">// Ajax Request</span>
     $<span class="token punctuation">.</span><span class="token function">getJSON</span><span class="token punctuation">(</span> <span class="token string">&quot;http://api.flickr.com/services/feeds/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
              tags<span class="token operator">:</span> tags<span class="token punctuation">,</span>
              tagmode<span class="token operator">:</span> <span class="token string">&quot;any&quot;</span><span class="token punctuation">,</span>
              format<span class="token operator">:</span> <span class="token string">&quot;json&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>

          <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">data</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>

              <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token operator">!</span>data<span class="token punctuation">.</span>items<span class="token punctuation">.</span>length <span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span>

              $<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span> <span class="token string">&quot;/search/resultSet&quot;</span> <span class="token punctuation">,</span> data<span class="token punctuation">.</span>items  <span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="mv-pattern"><a name="mv-pattern" class="anchor-navigation-ex-anchor" href="#mv-pattern"><i class="fa fa-link" aria-hidden="true"></i></a>4. MV* Pattern</h2>
<p>&#x5728; MVC &#x4E2D;&#xFF0C;&#x89C6;&#x56FE;&#x4F4D;&#x4E8E;&#x6211;&#x4EEC;&#x67B6;&#x6784;&#x7684;&#x9876;&#x90E8;&#xFF0C;&#x5176;&#x80CC;&#x540E;&#x662F;&#x63A7;&#x5236;&#x5668;.
&#x6A21;&#x578B;&#x5728;&#x63A7;&#x5236;&#x5668;&#x540E;&#x9762;&#xFF0C;&#x800C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x7684;&#x89C6;&#x56FE;&#x4E86;&#x89E3;&#x5F97;&#x5230;&#x6211;&#x4EEC;&#x7684;&#x63A7;&#x5236;&#x5668;&#xFF0C;&#x800C;&#x63A7;&#x5236;&#x5668;&#x4E86;&#x89E3;&#x5F97;&#x5230;&#x6A21;&#x578B;.
&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x7684;&#x89C6;&#x56FE;&#x6709;&#x5BF9;&#x6A21;&#x578B;&#x7684;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;.
&#x7136;&#x800C;&#x5C06;&#x6574;&#x4E2A;&#x6A21;&#x578B;&#x5B8C;&#x5168;&#x66B4;&#x9732;&#x7ED9;&#x89C6;&#x56FE;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x5B89;&#x5168;&#x548C;&#x6027;&#x80FD;&#x635F;&#x5931;,
&#x8FD9;&#x53D6;&#x51B3;&#x4E8E;&#x6211;&#x4EEC;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x590D;&#x6742;&#x6027;.
MVVM &#x5219;&#x5C1D;&#x8BD5;&#x53BB;&#x907F;&#x514D;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;.</p>
<p>&#x5728; MVP &#x4E2D;&#xFF0C;&#x63A7;&#x5236;&#x5668;&#x7684;&#x89D2;&#x8272;&#x88AB;&#x4EE3;&#x7406;&#x5668;&#x6240;&#x53D6;&#x4EE3;&#xFF0C;&#x4EE3;&#x7406;&#x5668;&#x548C;&#x89C6;&#x56FE;&#x5904;&#x4E8E;&#x540C;&#x6837;&#x7684;&#x5730;&#x4F4D;,
&#x89C6;&#x56FE;&#x548C;&#x6A21;&#x578B;&#x7684;&#x4E8B;&#x4EF6;&#x90FD;&#x88AB;&#x5B83;&#x4FA6;&#x542C;&#x7740;&#x5E76;&#x4E14;&#x63A5;&#x53D7;&#x5B83;&#x7684;&#x8C03;&#x89E3;.
&#x4E0D;&#x540C;&#x4E8E; MVVM&#xFF0C;&#x6CA1;&#x6709;&#x4E00;&#x4E2A;&#x5C06;&#x89C6;&#x56FE;&#x7ED1;&#x5B9A;&#x5230;&#x89C6;&#x56FE;&#x6A21;&#x578B;&#x7684;&#x673A;&#x5236;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x8F6C;&#x800C;&#x4F9D;&#x8D56;&#x4E8E;&#x6BCF;&#x4E00;&#x4E2A;&#x89C6;&#x56FE;&#x90FD;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x5141;&#x8BB8;&#x4EE3;&#x7406;&#x5668;&#x540C;&#x89C6;&#x56FE;&#x53BB;&#x4EA4;&#x4E92;&#x7684;&#x63A5;&#x53E3;.</p>
<p>MVVM &#x8FDB;&#x4E00;&#x6B65;&#x5141;&#x8BB8;&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6A21;&#x578B;&#x7684;&#x7279;&#x5B9A;&#x89C6;&#x56FE;&#x5B50;&#x96C6;&#xFF0C;&#x5305;&#x542B;&#x4E86;&#x72B6;&#x6001;&#x548C;&#x903B;&#x8F91;&#x4FE1;&#x606F;,
&#x907F;&#x514D;&#x4E86;&#x5C06;&#x6A21;&#x578B;&#x5B8C;&#x5168;&#x66B4;&#x9732;&#x7ED9;&#x89C6;&#x56FE;&#x7684;&#x5FC5;&#x8981;&#x3002;
&#x4E0D;&#x540C;&#x4E8E; MVP &#x7684;&#x4EE3;&#x7406;&#x5668;&#xFF0C;&#x89C6;&#x56FE;&#x6A21;&#x578B;&#x5E76;&#x4E0D;&#x9700;&#x8981;&#x53BB;&#x5F15;&#x7528;&#x4E00;&#x4E2A;&#x89C6;&#x56FE;&#x3002;
&#x89C6;&#x56FE;&#x53EF;&#x4EE5;&#x7ED1;&#x5B9A;&#x5230;&#x89C6;&#x56FE;&#x6A21;&#x578B;&#x7684;&#x5C5E;&#x6027;&#x4E0A;&#x9762;&#xFF0C;&#x89C6;&#x56FE;&#x6A21;&#x578B;&#x5219;&#x53BB;&#x5C06;&#x5305;&#x542B;&#x5728;&#x6A21;&#x578B;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x66B4;&#x9732;&#x7ED9;&#x89C6;&#x56FE;&#x3002;
&#x50CF;&#x6211;&#x4EEC;&#x6240;&#x63D0;&#x5230;&#x8FC7;&#x7684;&#xFF0C;&#x5BF9;&#x89C6;&#x56FE;&#x7684;&#x62BD;&#x8C61;&#x610F;&#x5473;&#x7740;&#x5176;&#x80CC;&#x540E;&#x7684;&#x4EE3;&#x7801;&#x9700;&#x8981;&#x8F83;&#x5C11;&#x7684;&#x903B;&#x8F91;&#x3002;</p>
<h2 id="jquery-pattern"><a name="jquery-pattern" class="anchor-navigation-ex-anchor" href="#jquery-pattern"><i class="fa fa-link" aria-hidden="true"></i></a>5. jQuery Pattern</h2>
<h3 id="plugin-pattern"><a name="plugin-pattern" class="anchor-navigation-ex-anchor" href="#plugin-pattern"><i class="fa fa-link" aria-hidden="true"></i></a>5.1. Plugin Pattern</h3>
<pre class="language-"><code class="lang-js"><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  $<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span>fn<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">myplugin</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// your plugin logic</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<pre class="language-"><code class="lang-js"><span class="token comment">// the semi-colon before the function invocation is a safety</span>
<span class="token comment">// net against concatenated scripts and/or other plugins</span>
<span class="token comment">// that are not closed properly.</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$<span class="token punctuation">,</span> window<span class="token punctuation">,</span> document<span class="token punctuation">,</span> <span class="token keyword">undefined</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// undefined is used here as the undefined global</span>
  <span class="token comment">// variable in ECMAScript 3 and is mutable (i.e. it can</span>
  <span class="token comment">// be changed by someone else). undefined isn&apos;t really</span>
  <span class="token comment">// being passed in so we can ensure that its value is</span>
  <span class="token comment">// truly undefined. In ES5, undefined can no longer be</span>
  <span class="token comment">// modified.</span>

  <span class="token comment">// window and document are passed through as local</span>
  <span class="token comment">// variables rather than as globals, because this (slightly)</span>
  <span class="token comment">// quickens the resolution process and can be more</span>
  <span class="token comment">// efficiently minified (especially when both are</span>
  <span class="token comment">// regularly referenced in our plugin).</span>

  <span class="token comment">// Create the defaults once</span>
  <span class="token keyword">var</span> pluginName <span class="token operator">=</span> <span class="token string">&apos;defaultPluginName&apos;</span><span class="token punctuation">,</span>
    defaults <span class="token operator">=</span> <span class="token punctuation">{</span>
      propertyName<span class="token operator">:</span> <span class="token string">&apos;value&apos;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// The actual plugin constructor</span>
  <span class="token keyword">function</span> <span class="token function">Plugin</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>element <span class="token operator">=</span> element<span class="token punctuation">;</span>

    <span class="token comment">// jQuery has an extend method that merges the</span>
    <span class="token comment">// contents of two or more objects, storing the</span>
    <span class="token comment">// result in the first object. The first object</span>
    <span class="token comment">// is generally empty because we don&apos;t want to alter</span>
    <span class="token comment">// the default options for future instances of the plugin</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>options <span class="token operator">=</span> $<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> defaults<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>_defaults <span class="token operator">=</span> defaults<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_name <span class="token operator">=</span> pluginName<span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token class-name">Plugin</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">init</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Place initialization logic here</span>
    <span class="token comment">// We already have access to the DOM element and</span>
    <span class="token comment">// the options via the instance, e.g. this.element</span>
    <span class="token comment">// and this.options</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// A really lightweight plugin wrapper around the constructor,</span>
  <span class="token comment">// preventing against multiple instantiations</span>
  $<span class="token punctuation">.</span>fn<span class="token punctuation">[</span>pluginName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>$<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">&apos;plugin_&apos;</span> <span class="token operator">+</span> pluginName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        $<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">&apos;plugin_&apos;</span> <span class="token operator">+</span> pluginName<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Plugin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">,</span> window<span class="token punctuation">,</span> document<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<footer class="page-footer"><span class="copyright">&#xA9; <a xmlns:cc="http://creativecommons.org/ns#" href="https://github.com/sabertazimi/awesome-notes" property="cc:attributionName" rel="cc:attributionURL" target="_blank">sabertazimi</a> &#xB7; &#x9075;&#x5FAA; <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">&#x77E5;&#x8BC6;&#x5171;&#x4EAB; &#x7F72;&#x540D;-&#x975E;&#x5546;&#x4E1A;&#x6027;&#x4F7F;&#x7528; 4.0 &#x56FD;&#x9645; &#x8BB8;&#x53EF;&#x534F;&#x8BAE;</a> all right reserved&#xFF0C;powered by Gitbook</span><span class="footer-modification">&#x6700;&#x8FD1;&#x66F4;&#x65B0;&#xFF1A;
2021-07-15 21:57
</span></footer>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="codeReviewBasicNotes.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Code Review Basic Notes">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Design Patterns Notes","level":"1.4.2.4","depth":3,"next":{"title":"Functional Programming","level":"1.4.3","depth":2,"ref":"","articles":[{"title":"Functional Programming Basic Notes","level":"1.4.3.1","depth":3,"path":"programming/functionalProgramming/functionalProgrammingBasicNotes.md","ref":"programming/functionalProgramming/functionalProgrammingBasicNotes.md","articles":[]}]},"previous":{"title":"Code Review Basic Notes","level":"1.4.2.3","depth":3,"path":"programming/codeGuide/codeReviewBasicNotes.md","ref":"programming/codeGuide/codeReviewBasicNotes.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-lunr","-search","search-plus","splitter","anchors","anchor-navigation-ex","copy-code-button","expandable-chapters","theme-darkblue","theme-comscore","tbfed-pagefooter","prism","-highlight","github-buttons","edit-link","disqus","introsum"],"ignores":[".*","build","_book","gitbook","node_modules"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"tbfed-pagefooter":{"copyright":"&copy <a xmlns:cc=\"http://creativecommons.org/ns#\" href=\"https://github.com/sabertazimi/awesome-notes\" property=\"cc:attributionName\" rel=\"cc:attributionURL\">sabertazimi</a> Â· éµå¾ª <a rel=\"license\" href=\"http://creativecommons.org/licenses/by-nc/4.0/\">ç¥è¯å±äº« ç½²å-éåä¸æ§ä½¿ç¨ 4.0 å½é è®¸å¯åè®®</a>","modify_label":"æè¿æ´æ°ï¼","modify_format":"YYYY-MM-DD HH:mm"},"prism":{"css":["prismjs/themes/prism-tomorrow.css"]},"disqus":{"useIdentifier":false,"shortName":"gitbook-8"},"splitter":{},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-darkblue":{},"anchor-navigation-ex":{"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":false,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showGoTop":true,"showLevel":true},"theme-comscore":{},"github-buttons":{"buttons":[{"user":"sabertazimi","repo":"awesome-notes","type":"star","size":"small","count":true}]},"copy-code-button":{},"sharing":{"facebook":false,"twitter":true,"google":false,"weibo":true,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/sabertazimi/awesome-notes/edit/master"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{},"introsum":{},"expandable-chapters":{},"search-plus":{}},"theme":"default","author":"sabertazimi","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Awesome Notes","links":{"sidebar":{"Awesome Notes":"https://github.com/sabertazimi/awesome-notes"}},"gitbook":"*"},"file":{"path":"programming/codeGuide/designPatternsNotes.md","mtime":"2021-07-15T21:57:06.360Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-07-15T21:58:50.568Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-copy-code-button/toggle.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-github-buttons/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/URI.js/1.16.1/URI.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-disqus/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-theme-comscore/test.js"></script>
        
    

    </body>
</html>

